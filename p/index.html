<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Djangoé¡¹ç›®åˆ›å»º é¡¹ç›®+è™šæ‹Ÿç¯å¢ƒ\nDjangoé¡¹ç›®çš„åˆ›å»º 1 2 # å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„djano pip install django==3.2 å‘½ä»¤è¡Œæ“ä½œ 1 2 cd é¡¹ç›®ç›®å½• django-admin startproject é¡¹ç›®å é¡¹ç›®ç»“æ„\n1 2 3 4 5 6 7 8 myproject â”œâ”€â”€ manage.py [é¡¹ç›®çš„ç®¡ç†å·¥å…·] â””â”€â”€ myproject â”œâ”€â”€ __init__.py â”œâ”€â”€ settings.py ã€é…ç½®æ–‡ä»¶ï¼Œåªæœ‰ä¸€éƒ¨åˆ†ã€‚ç¨‹åºå¯åŠ¨æ—¶ï¼Œå…ˆè¯»å–djangoå†…éƒ¨é…ç½®ï¼Œå†è¯»settings.pyã€‘ â”œâ”€â”€ urls.py\tã€ä¸»è·¯ç”±ï¼Œåœ¨é‡Œé¢ç¼–å†™ /xxx/xxx/xxx ---&gt; index ã€‘ â”œâ”€â”€ asgi.py ã€å¼‚æ­¥ã€‘ â””â”€â”€ wsgi.py ã€åŒæ­¥ï¼Œä¸»ã€‘ é¡¹ç›®å¯åŠ¨\n1 2 cd é¡¹ç›®å python manage.py runserver IP:ç«¯å£ï¼ˆå¯é»˜è®¤ä¸å†™ï¼‰ app\n1 2 cd é¡¹ç›® python manage.py startapp appå é¡¹ç›®ç»“æ„\n">
<title></title>

<link rel='canonical' href='https://yn0t1me.github.io/p/'>

<link rel="stylesheet" href="/scss/style.min.b9c8156d464c343bdacaf14a871581fb94cbbdb9dd5cbce4ba017361187cc930.css"><meta property='og:title' content="">
<meta property='og:description' content="Djangoé¡¹ç›®åˆ›å»º é¡¹ç›®+è™šæ‹Ÿç¯å¢ƒ\nDjangoé¡¹ç›®çš„åˆ›å»º 1 2 # å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„djano pip install django==3.2 å‘½ä»¤è¡Œæ“ä½œ 1 2 cd é¡¹ç›®ç›®å½• django-admin startproject é¡¹ç›®å é¡¹ç›®ç»“æ„\n1 2 3 4 5 6 7 8 myproject â”œâ”€â”€ manage.py [é¡¹ç›®çš„ç®¡ç†å·¥å…·] â””â”€â”€ myproject â”œâ”€â”€ __init__.py â”œâ”€â”€ settings.py ã€é…ç½®æ–‡ä»¶ï¼Œåªæœ‰ä¸€éƒ¨åˆ†ã€‚ç¨‹åºå¯åŠ¨æ—¶ï¼Œå…ˆè¯»å–djangoå†…éƒ¨é…ç½®ï¼Œå†è¯»settings.pyã€‘ â”œâ”€â”€ urls.py\tã€ä¸»è·¯ç”±ï¼Œåœ¨é‡Œé¢ç¼–å†™ /xxx/xxx/xxx ---&gt; index ã€‘ â”œâ”€â”€ asgi.py ã€å¼‚æ­¥ã€‘ â””â”€â”€ wsgi.py ã€åŒæ­¥ï¼Œä¸»ã€‘ é¡¹ç›®å¯åŠ¨\n1 2 cd é¡¹ç›®å python manage.py runserver IP:ç«¯å£ï¼ˆå¯é»˜è®¤ä¸å†™ï¼‰ app\n1 2 cd é¡¹ç›® python manage.py startapp appå é¡¹ç›®ç»“æ„\n">
<meta property='og:url' content='https://yn0t1me.github.io/p/'>
<meta property='og:site_name' content='yn0t1meçš„åšå®¢'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' />
<meta name="twitter:title" content="">
<meta name="twitter:description" content="Djangoé¡¹ç›®åˆ›å»º é¡¹ç›®+è™šæ‹Ÿç¯å¢ƒ\nDjangoé¡¹ç›®çš„åˆ›å»º 1 2 # å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„djano pip install django==3.2 å‘½ä»¤è¡Œæ“ä½œ 1 2 cd é¡¹ç›®ç›®å½• django-admin startproject é¡¹ç›®å é¡¹ç›®ç»“æ„\n1 2 3 4 5 6 7 8 myproject â”œâ”€â”€ manage.py [é¡¹ç›®çš„ç®¡ç†å·¥å…·] â””â”€â”€ myproject â”œâ”€â”€ __init__.py â”œâ”€â”€ settings.py ã€é…ç½®æ–‡ä»¶ï¼Œåªæœ‰ä¸€éƒ¨åˆ†ã€‚ç¨‹åºå¯åŠ¨æ—¶ï¼Œå…ˆè¯»å–djangoå†…éƒ¨é…ç½®ï¼Œå†è¯»settings.pyã€‘ â”œâ”€â”€ urls.py\tã€ä¸»è·¯ç”±ï¼Œåœ¨é‡Œé¢ç¼–å†™ /xxx/xxx/xxx ---&gt; index ã€‘ â”œâ”€â”€ asgi.py ã€å¼‚æ­¥ã€‘ â””â”€â”€ wsgi.py ã€åŒæ­¥ï¼Œä¸»ã€‘ é¡¹ç›®å¯åŠ¨\n1 2 cd é¡¹ç›®å python manage.py runserver IP:ç«¯å£ï¼ˆå¯é»˜è®¤ä¸å†™ï¼‰ app\n1 2 cd é¡¹ç›® python manage.py startapp appå é¡¹ç›®ç»“æ„\n">
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_901763171188d896.png" width="300"
                            height="284" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ§</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">yn0t1meçš„åšå®¢</a></h1>
            <h2 class="site-description">äººç”ŸèŒ«èŒ«ï¼Œå”¯æ­»äº¡ä¸çˆ±è€Œå·²</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/yn0t1me'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>å‹é“¾</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æš—è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#djangoé¡¹ç›®åˆ›å»º">Djangoé¡¹ç›®åˆ›å»º</a>
      <ol>
        <li><a href="#djangoé¡¹ç›®çš„åˆ›å»º">Djangoé¡¹ç›®çš„åˆ›å»º</a>
          <ol>
            <li><a href="#å‘½ä»¤è¡Œæ“ä½œ">å‘½ä»¤è¡Œæ“ä½œ</a></li>
            <li><a href="#pycharmæ“ä½œ">Pycharmæ“ä½œ</a></li>
          </ol>
        </li>
        <li><a href="#è™šæ‹Ÿç¯å¢ƒ">è™šæ‹Ÿç¯å¢ƒ</a>
          <ol>
            <li><a href="#å‘½ä»¤è¡Œ">å‘½ä»¤è¡Œ</a></li>
            <li><a href="#pycharm">Pycharm</a></li>
          </ol>
        </li>
        <li><a href="#appåˆ›å»º">appåˆ›å»º</a></li>
        <li><a href="#çº¯å‡€ç‰ˆ">çº¯å‡€ç‰ˆ</a></li>
      </ol>
    </li>
    <li><a href="#djangoé¡¹ç›®æ–‡ä»¶ç»“æ„åŠä½œç”¨ä¸ªäººä¹ æƒ¯">Djangoé¡¹ç›®æ–‡ä»¶ç»“æ„åŠä½œç”¨ï¼ˆä¸ªäººä¹ æƒ¯ï¼‰</a></li>
    <li><a href="#è·¯ç”±é…ç½®">è·¯ç”±é…ç½®</a>
      <ol>
        <li><a href="#urlconfå¦‚ä½•å·¥ä½œ">URLconfå¦‚ä½•å·¥ä½œ</a>
          <ol>
            <li><a href="#æ‰‹åŠ¨è·¯ç”±åˆ†å‘">æ‰‹åŠ¨è·¯ç”±åˆ†å‘</a></li>
            <li><a href="#includeappå°†åŠŸèƒ½æ‹†åˆ†åˆ°ä¸åŒçš„appä¸­">include+appï¼Œå°†åŠŸèƒ½æ‹†åˆ†åˆ°ä¸åŒçš„appä¸­</a></li>
          </ol>
        </li>
        <li><a href="#urlè®¾è®¡æ–¹æ³•">URLè®¾è®¡æ–¹æ³•</a>
          <ol>
            <li><a href="#pathfont-stylecolorrgb92-89-98background-colorrgb245-246-250å˜é‡ç±»å‹å˜é‡åfont">path<code>&lt;font style=&quot;color:rgb(92, 89, 98);background-color:rgb(245, 246, 250);&quot;&gt;&lt;å˜é‡ç±»å‹:å˜é‡å&gt;&lt;/font&gt;</code></a></li>
            <li><a href="#re_pathpå˜é‡åè¡¨è¾¾å¼">re_path<code>(?p&lt;å˜é‡å&gt;è¡¨è¾¾å¼)</code></a></li>
          </ol>
        </li>
        <li><a href="#è·¯ç”±åˆ†å‘æœ¬è´¨">è·¯ç”±åˆ†å‘æœ¬è´¨</a></li>
        <li><a href="#name">name</a></li>
        <li><a href="#namespace">namespace</a>
          <ol>
            <li><a href="#è§†å›¾ä¸­ä½¿ç”¨"><font style="color:rgb(92, 89, 98);">è§†å›¾ä¸­ä½¿ç”¨</font></a></li>
            <li><a href="#æ¨¡æ¿ä¸­ä½¿ç”¨">æ¨¡æ¿ä¸­ä½¿ç”¨</a></li>
          </ol>
        </li>
        <li><a href="#urlæœ«å°¾çš„">urlæœ«å°¾çš„/</a></li>
        <li><a href="#å½“å‰åŒ¹é…å¯¹è±¡">å½“å‰åŒ¹é…å¯¹è±¡</a></li>
        <li><a href="#partial">partial</a></li>
      </ol>
    </li>
    <li><a href="#è§†å›¾">è§†å›¾</a>
      <ol>
        <li><a href="#æ–‡ä»¶oræ–‡ä»¶å¤¹">æ–‡ä»¶oræ–‡ä»¶å¤¹</a></li>
        <li><a href="#ç»å¯¹å¯¼å…¥å’Œç›¸å¯¹å¯¼å…¥">ç»å¯¹å¯¼å…¥å’Œç›¸å¯¹å¯¼å…¥</a></li>
        <li><a href="#è§†å›¾å‚æ•°">è§†å›¾å‚æ•°</a></li>
        <li><a href="#è¿”å›å€¼">è¿”å›å€¼</a></li>
        <li><a href="#å“åº”å¤´">å“åº”å¤´</a></li>
        <li><a href="#fbvå’Œcbv">FBVå’ŒCBV</a></li>
      </ol>
    </li>
    <li><a href="#é™æ€èµ„æº">é™æ€èµ„æº</a>
      <ol>
        <li><a href="#é™æ€æ–‡ä»¶">é™æ€æ–‡ä»¶</a></li>
        <li><a href="#åª’ä½“æ–‡ä»¶">åª’ä½“æ–‡ä»¶</a></li>
      </ol>
    </li>
    <li><a href="#æ¨¡æ¿">æ¨¡æ¿</a>
      <ol>
        <li><a href="#htmlæ¨¡æ¿çš„å¯»æ‰¾é¡ºåº">htmlæ¨¡æ¿çš„å¯»æ‰¾é¡ºåº</a></li>
        <li><a href="#æ¨¡æ¿å¤„ç†çš„æœ¬è´¨">æ¨¡æ¿å¤„ç†çš„æœ¬è´¨</a></li>
        <li><a href="#å¸¸ç”¨è¯­æ³•">å¸¸ç”¨è¯­æ³•</a></li>
        <li><a href="#ç»§æ‰¿ä¸æ¯ç‰ˆ">ç»§æ‰¿ä¸æ¯ç‰ˆ</a>
          <ol>
            <li><a href="#åŸºç¡€æ¨¡æ¿æ¯ç‰ˆ">åŸºç¡€æ¨¡æ¿ï¼ˆæ¯ç‰ˆï¼‰</a></li>
            <li><a href="#å­æ¨¡æ¿">å­æ¨¡æ¿</a></li>
            <li><a href="#æ¨¡æ¿çš„å¯¼å…¥">æ¨¡æ¿çš„å¯¼å…¥</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#ä¸­é—´ä»¶">ä¸­é—´ä»¶</a>
      <ol>
        <li><a href="#ç®€å•å®ä¾‹åŸå§‹">ç®€å•å®ä¾‹ï¼ˆåŸå§‹ï¼‰</a></li>
        <li><a href="#middlewaremixinæ¨è">MiddlewareMixinï¼ˆæ¨èï¼‰</a>
          <ol>
            <li><a href="#é£Ÿç”¨æ–¹æ³•">é£Ÿç”¨æ–¹æ³•</a></li>
            <li><a href="#æ‰§è¡Œæµç¨‹">æ‰§è¡Œæµç¨‹</a></li>
            <li><a href="#å…¶ä»–">å…¶ä»–</a></li>
            <li><a href="#æ€»ç»“"><font style="color:rgb(6, 6, 7);">æ€»ç»“</font></a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#ormæ“ä½œ"><font style="color:rgb(6, 6, 7);">ORMæ“ä½œ</font></a>
      <ol>
        <li><a href="#ormåŸºæœ¬æ“ä½œæ­¥éª¤">ORMåŸºæœ¬æ“ä½œæ­¥éª¤</a></li>
        <li><a href="#è¿æ¥æ•°æ®åº“">è¿æ¥æ•°æ®åº“</a>
          <ol>
            <li><a href="#é¡¹ç›®è¿æ¥mysql">é¡¹ç›®è¿æ¥MySQLï¼š</a></li>
            <li><a href="#å…¶ä»–æ•°æ®åº“">å…¶ä»–æ•°æ®åº“</a></li>
          </ol>
        </li>
        <li><a href="#è¿æ¥æ± ">è¿æ¥æ± </a></li>
        <li><a href="#å¤šæ•°æ®åº“">å¤šæ•°æ®åº“</a>
          <ol>
            <li><a href="#è¯»å†™åˆ†ç¦»">è¯»å†™åˆ†ç¦»</a></li>
            <li><a href="#åˆ†åº“å¤šapp---å¤šæ•°æ®åº“">åˆ†åº“ï¼ˆå¤šapp -&gt; å¤šæ•°æ®åº“ï¼‰</a></li>
            <li><a href="#åˆ†åº“å•app">åˆ†åº“ï¼ˆå•appï¼‰</a></li>
            <li><a href="#æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</a></li>
          </ol>
        </li>
        <li><a href="#è¡¨å…³ç³»">è¡¨å…³ç³»</a></li>
        <li><a href="#æ•°æ®æ“ä½œ">æ•°æ®æ“ä½œ</a>
          <ol>
            <li><a href="#å•è¡¨">å•è¡¨</a></li>
            <li><a href="#ä¸€å¯¹å¤š">ä¸€å¯¹å¤š</a></li>
            <li><a href="#å¤šå¯¹å¤š">å¤šå¯¹å¤š</a></li>
            <li><a href="#ä¸€å¯¹ä¸€">ä¸€å¯¹ä¸€</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#cookieå’Œseeesion">cookieå’Œseeesion</a>
      <ol>
        <li><a href="#cookie">cookie</a></li>
        <li><a href="#é…ç½®session">é…ç½®session</a></li>
        <li><a href="#ç¼“å­˜">ç¼“å­˜</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/"></a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 34 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="djangoé¡¹ç›®åˆ›å»º">Djangoé¡¹ç›®åˆ›å»º
</h2><p>é¡¹ç›®+è™šæ‹Ÿç¯å¢ƒ</p>
<h3 id="djangoé¡¹ç›®çš„åˆ›å»º">Djangoé¡¹ç›®çš„åˆ›å»º
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„djano</span>
</span></span><span class="line"><span class="cl"><span class="n">pip</span> <span class="n">install</span> <span class="n">django</span><span class="o">==</span><span class="mf">3.2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å‘½ä»¤è¡Œæ“ä½œ">å‘½ä»¤è¡Œæ“ä½œ
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">cd</span> <span class="n">é¡¹ç›®ç›®å½•</span>
</span></span><span class="line"><span class="cl"><span class="n">django</span><span class="o">-</span><span class="n">admin</span> <span class="n">startproject</span> <span class="n">é¡¹ç›®å</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é¡¹ç›®ç»“æ„</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">myproject</span>
</span></span><span class="line"><span class="cl"><span class="err">â”œâ”€â”€</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span>              <span class="p">[</span><span class="n">é¡¹ç›®çš„ç®¡ç†å·¥å…·</span><span class="p">]</span>  
</span></span><span class="line"><span class="cl"><span class="err">â””â”€â”€</span> <span class="n">myproject</span>
</span></span><span class="line"><span class="cl">    <span class="err">â”œâ”€â”€</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="err">â”œâ”€â”€</span> <span class="n">settings</span><span class="o">.</span><span class="n">py</span>        <span class="err">ã€</span><span class="n">é…ç½®æ–‡ä»¶</span><span class="err">ï¼Œ</span><span class="n">åªæœ‰ä¸€éƒ¨åˆ†</span><span class="err">ã€‚</span><span class="n">ç¨‹åºå¯åŠ¨æ—¶</span><span class="err">ï¼Œ</span><span class="n">å…ˆè¯»å–djangoå†…éƒ¨é…ç½®</span><span class="err">ï¼Œ</span><span class="n">å†è¯»settings</span><span class="o">.</span><span class="n">py</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl">    <span class="err">â”œâ”€â”€</span> <span class="n">urls</span><span class="o">.</span><span class="n">py</span>			   <span class="err">ã€</span><span class="n">ä¸»è·¯ç”±</span><span class="err">ï¼Œ</span><span class="n">åœ¨é‡Œé¢ç¼–å†™</span>  <span class="o">/</span><span class="n">xxx</span><span class="o">/</span><span class="n">xxx</span><span class="o">/</span><span class="n">xxx</span> <span class="o">---&gt;</span> <span class="n">index</span> <span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl">    <span class="err">â”œâ”€â”€</span> <span class="n">asgi</span><span class="o">.</span><span class="n">py</span>            <span class="err">ã€</span><span class="n">å¼‚æ­¥</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl">    <span class="err">â””â”€â”€</span> <span class="n">wsgi</span><span class="o">.</span><span class="n">py</span>            <span class="err">ã€</span><span class="n">åŒæ­¥</span><span class="err">ï¼Œ</span><span class="n">ä¸»</span><span class="err">ã€‘</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é¡¹ç›®å¯åŠ¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">cd</span> <span class="n">é¡¹ç›®å</span>
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">runserver</span> <span class="n">IP</span><span class="p">:</span><span class="n">ç«¯å£</span><span class="err">ï¼ˆ</span><span class="n">å¯é»˜è®¤ä¸å†™</span><span class="err">ï¼‰</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>app</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">cd</span> <span class="n">é¡¹ç›®</span>
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">startapp</span> <span class="n">appå</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é¡¹ç›®ç»“æ„</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">myproject</span>
</span></span><span class="line"><span class="cl"><span class="err">â”œâ”€â”€</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="err">â”œâ”€â”€</span> <span class="n">myproject</span>
</span></span><span class="line"><span class="cl"><span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="n">asgi</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="n">settings</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="n">urls</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="err">â”‚</span>   <span class="err">â””â”€â”€</span> <span class="n">wsgi</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="err">â””â”€â”€</span> <span class="n">web</span>
</span></span><span class="line"><span class="cl">    <span class="err">â”œâ”€â”€</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="err">â”œâ”€â”€</span> <span class="n">admin</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="err">â”œâ”€â”€</span> <span class="n">apps</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="err">â”œâ”€â”€</span> <span class="n">migrations</span>
</span></span><span class="line"><span class="cl">    <span class="err">â”‚</span>   <span class="err">â””â”€â”€</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="err">â”œâ”€â”€</span> <span class="n">models</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="err">â”œâ”€â”€</span> <span class="n">tests</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="err">â””â”€â”€</span> <span class="n">views</span><span class="o">.</span><span class="n">py</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="pycharmæ“ä½œ">Pycharmæ“ä½œ
</h4><p>åˆ›å»ºdjangoé¡¹ç›®</p>
<p><img src="/post/python/Django/1732088054327-ef4f3362-451c-4611-8d64-2ba238d83fb0.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>ç”Ÿæˆæ•ˆæœ</p>
<p><img src="/post/python/Django/1732088219082-78f02080-3e2f-4b4f-8fee-60bcef043724.png"
	
	
	
	loading="lazy"
	
	
></p>
<h3 id="è™šæ‹Ÿç¯å¢ƒ">è™šæ‹Ÿç¯å¢ƒ
</h3><p>ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒå¯ä»¥æ˜¯å„ä¸ªé¡¹ç›®ä¹‹é—´çš„ç¯å¢ƒéš”ç¦»å¼€ï¼Œä¸ºæ¯ä¸€ä¸ªé¡¹ç›®å•ç‹¬åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç³»ç»Ÿè§£é‡Šå™¨</p>
<h4 id="å‘½ä»¤è¡Œ">å‘½ä»¤è¡Œ
</h4><p>æ­¤å¤„åªä»‹ç»virtualenvçš„ç”¨æ³•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># é¦–å…ˆpipå®‰è£…virualenvåº“ éšä¾¿å“ªä¸ªç³»ç»Ÿè§£é‡Šå™¨å‡å¯</span>
</span></span><span class="line"><span class="cl"><span class="n">pip</span> <span class="n">install</span> <span class="n">virtualenv</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">cd</span> <span class="n">ç›®æ ‡æ–‡ä»¶å¤¹</span>
</span></span><span class="line"><span class="cl"><span class="n">virtualenv</span> <span class="n">è™šæ‹Ÿç¯å¢ƒå</span> <span class="o">--</span><span class="n">python</span><span class="o">=</span><span class="n">ç³»ç»Ÿè§£é‡Šå™¨</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">virtualenv</span> <span class="o">/</span><span class="n">ç›®æ ‡æ–‡ä»¶å¤¹</span><span class="o">/</span><span class="n">è™šæ‹Ÿç¯å¢ƒå</span> <span class="o">--</span><span class="n">python</span><span class="o">=</span><span class="n">ç³»ç»Ÿè§£é‡Šå™¨</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ“ä½œ</p>
<ul>
<li>å°†D:\envsè§†ä¸ºä»¥åå­˜æ”¾è™šæ‹Ÿç¯å¢ƒçš„ç›®å½•</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">cd</span> \<span class="n">envs</span>
</span></span><span class="line"><span class="cl"><span class="n">virtualenv</span> <span class="n">crm</span> <span class="o">--</span><span class="n">python</span><span class="o">=</span><span class="n">python39</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/post/python/Django/1732089006310-a4f0e644-3969-49ec-94b1-82bed5401f53.png"
	
	
	
	loading="lazy"
	
	
></p>
<ul>
<li>æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">cd</span> <span class="n">crm</span>\<span class="n">Scripts</span>
</span></span><span class="line"><span class="cl"><span class="n">activate</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å‡ºç°å›¾ç¤º(è™šæ‹Ÿç¯å¢ƒå)è¡¨æ˜æ¿€æ´»æˆåŠŸ</p>
<p><img src="/post/python/Django/1732089138522-4e67f8fc-51a0-4114-9e2e-50c28c2b5989.png"
	
	
	
	loading="lazy"
	
	
></p>
<ul>
<li>å®‰è£…åŒ…</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">pip</span> <span class="n">install</span> <span class="n">åŒ…å</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>åˆ›å»ºdjangoé¡¹ç›®</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">cd</span> <span class="n">é¡¹ç›®ç›®å½•</span>
</span></span><span class="line"><span class="cl"><span class="n">django</span><span class="o">-</span><span class="n">admin</span> <span class="n">startproject</span> <span class="n">crm</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/post/python/Django/1732089413412-38b9f663-f1e6-4e9b-be4d-0336f8867975.png"
	
	
	
	loading="lazy"
	
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">startapp</span> <span class="n">xxx</span>
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">runserver</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">deactivate</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="pycharm">Pycharm
</h4><p>åˆ›å»ºæŒ‡å®šdjangoç‰ˆæœ¬çš„é¡¹ç›®</p>
<ul>
<li>åˆ›å»ºçº¯å‡€é¡¹ç›®+åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</li>
</ul>
<p><img src="/post/python/Django/1732089953446-ec7f2c26-9685-4617-a075-302bc5c97ba1.png"
	
	
	
	loading="lazy"
	
	
></p>
<ul>
<li>åˆ›å»ºdjangoé¡¹ç›®</li>
</ul>
<p>å®‰è£…django</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">pip</span> <span class="n">install</span> <span class="n">django</span><span class="o">==</span><span class="mf">3.2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ›å»ºé¡¹ç›®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">django</span><span class="o">-</span><span class="n">admin</span> <span class="n">startproject</span> <span class="n">myproj</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸ºæˆ‘çš„pycharmè™šæ‹Ÿç¯å¢ƒæœ‰é—®é¢˜ï¼Œåªæœ‰åœ¨Scriptç›®å½•ä¸‹æ‰è¢«æ¿€æ´»ï¼Œå› æ­¤æŒ‡å®šäº†ä¸€ä¸‹åˆ›å»ºè·¯å¾„</p>
<p><img src="/post/python/Django/1732090258231-79603868-d786-4ff9-840e-97f7297771a0.png"
	
	
	
	loading="lazy"
	
	
></p>
<ul>
<li>é…ç½®djangoçš„å¯åŠ¨æŒ‰é’®</li>
</ul>
<p><img src="/post/python/Django/1732091034828-6dd33792-a724-4923-85b1-042177510b1a.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>fixé”®</p>
<p><img src="/post/python/Django/1732091520209-c45cff8d-7cfb-495e-ab4a-471cae5abb49.png"
	
	
	
	loading="lazy"
	
	
></p>
<p><img src="/post/python/Django/1732091447518-e3c10327-4abf-458a-86ac-f4a432e468f0.png"
	
	
	
	loading="lazy"
	
	
></p>
<h3 id="appåˆ›å»º">appåˆ›å»º
</h3><p>å•ä¸ªappç›®å½•ç»“æ„å¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">myproj</span>
</span></span><span class="line"><span class="cl"><span class="err">â”œâ”€â”€</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="err">â”œâ”€â”€</span> <span class="n">myproj</span>
</span></span><span class="line"><span class="cl"><span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="n">asgi</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="n">settings</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="n">urls</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="err">â”‚</span>   <span class="err">â””â”€â”€</span> <span class="n">wsgi</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="err">â””â”€â”€</span> <span class="n">web</span>
</span></span><span class="line"><span class="cl">    <span class="err">â”œâ”€â”€</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="err">â”œâ”€â”€</span> <span class="n">admin</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="err">â”œâ”€â”€</span> <span class="n">apps</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="err">â”œâ”€â”€</span> <span class="n">migrations</span>
</span></span><span class="line"><span class="cl">    <span class="err">â”‚</span>   <span class="err">â””â”€â”€</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="err">â”œâ”€â”€</span> <span class="n">models</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="err">â”œâ”€â”€</span> <span class="n">tests</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="err">â””â”€â”€</span> <span class="n">views</span><span class="o">.</span><span class="n">py</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¦ä½¿ç”¨å¤šappæ—¶ï¼Œå»ºè®®åœ¨æ ¹ç›®å½•å»ºç«‹appsç›®å½•ï¼Œåœ¨å…¶ä¸­ä¾æ¬¡å»ºç«‹ä»¥appåå‘½åçš„ç›®å½•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">myproj</span>
</span></span><span class="line"><span class="cl">	<span class="o">.</span><span class="n">venv</span>
</span></span><span class="line"><span class="cl">    <span class="n">myproj</span>
</span></span><span class="line"><span class="cl">    	<span class="o">...</span>
</span></span><span class="line"><span class="cl">        <span class="o">...</span>
</span></span><span class="line"><span class="cl">    <span class="n">manage</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="n">apps</span>
</span></span><span class="line"><span class="cl">    	<span class="n">web</span>
</span></span><span class="line"><span class="cl">        <span class="n">backend</span>
</span></span><span class="line"><span class="cl">        <span class="n">api</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># å…ˆåˆ›å»ºå¦‚ä¸Šç»“æ„çš„ç›®å½•</span>
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">startapp</span> <span class="n">spi</span> <span class="n">apps</span><span class="o">/</span><span class="n">api</span>
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">startapp</span> <span class="n">web</span> <span class="n">apps</span><span class="o">/</span><span class="n">web</span>
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">startapp</span> <span class="n">backend</span> <span class="n">apps</span><span class="o">/</span><span class="n">backend</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="çº¯å‡€ç‰ˆ">çº¯å‡€ç‰ˆ
</h3><p><img src="/post/python/Django/1732091798025-cc0487a7-6d8c-4a3f-9dfb-3105790af457.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>å°†ä¸éœ€è¦ä½¿ç”¨çš„appï¼Œä¸­é—´ä»¶ï¼Œæ¨¡æ¿åœ¨settingsæ–‡ä»¶ä¸­æ³¨é‡Šå³å¯å¾—åˆ°ä¸€ä¸ªçº¯å‡€ç‰ˆçš„djangoé¡¹ç›®</p>
<h2 id="djangoé¡¹ç›®æ–‡ä»¶ç»“æ„åŠä½œç”¨ä¸ªäººä¹ æƒ¯">Djangoé¡¹ç›®æ–‡ä»¶ç»“æ„åŠä½œç”¨ï¼ˆä¸ªäººä¹ æƒ¯ï¼‰
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">D</span><span class="p">:</span>\<span class="n">Data</span>\<span class="n">Codefield</span>\<span class="n">CODE</span><span class="o">-</span><span class="n">Python</span>\<span class="n">pyå…¨æ ˆ</span>\<span class="n">æ¨¡å—å…­</span>\<span class="n">day06</span><span class="o">&gt;</span><span class="n">treee</span> <span class="o">-</span><span class="n">I</span> <span class="o">.</span><span class="n">venv</span> <span class="o">-</span><span class="n">f</span>
</span></span><span class="line"><span class="cl"><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="o">|--</span> <span class="o">./</span><span class="n">day06</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">day06</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">day06</span><span class="o">/</span><span class="n">__pycache__</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="n">çœç•¥</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">day06</span><span class="o">/</span><span class="n">asgi</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">day06</span><span class="o">/</span><span class="n">local_settings</span><span class="o">.</span><span class="n">py</span><span class="err">ã€</span><span class="n">æœ¬åœ°é…ç½®</span><span class="err">ï¼Œ</span><span class="n">å¦‚æ•°æ®åº“ç­‰é…ç½®</span><span class="err">ï¼Œ</span><span class="n">åŒºåˆ«äºsettings</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">day06</span><span class="o">/</span><span class="n">settings</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">day06</span><span class="o">/</span><span class="n">urls</span><span class="o">.</span><span class="n">py</span><span class="err">ã€</span><span class="n">ä¹¦å†™è·¯ç”±ä¸è§†å›¾å‡½æ•°å¯¹åº”å…³ç³»</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="err">`</span><span class="o">--</span> <span class="o">./</span><span class="n">day06</span><span class="o">/</span><span class="n">wsgi</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="o">|--</span> <span class="o">./</span><span class="n">django_error</span><span class="o">.</span><span class="n">log</span> <span class="err">ã€</span><span class="n">é”™è¯¯æ—¥å¿—</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl"><span class="o">|--</span> <span class="o">./</span><span class="n">manage</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="o">|--</span> <span class="o">./</span><span class="n">requirements</span><span class="err">ã€</span><span class="n">åº“ä¾èµ–æ–‡ä»¶</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl"><span class="o">|--</span> <span class="o">./</span><span class="n">scripts</span><span class="err">ã€</span><span class="n">è„šæœ¬æ–‡ä»¶</span><span class="err">ï¼Œ</span><span class="n">éšæ„å†™</span><span class="err">ï¼Œ</span><span class="n">æ”¾æ‚ç‰©</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">scripts</span><span class="o">/</span><span class="n">init_admin</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">scripts</span><span class="o">/</span><span class="n">init_customer</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="err">`</span><span class="o">--</span> <span class="o">./</span><span class="n">scripts</span><span class="o">/</span>\<span class="mi">303</span>\<span class="mi">346</span>\<span class="mi">317</span>\<span class="mi">362</span>\<span class="mi">266</span>\<span class="mi">324</span>\<span class="mi">317</span>\<span class="mi">363</span>\<span class="mi">274</span>\<span class="mi">314</span>\<span class="mi">263</span>\<span class="mf">320.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="o">|--</span> <span class="o">./</span><span class="n">shell</span><span class="err">ã€</span><span class="n">éƒ¨ç½²æ—¶æ–¹ä¾¿æ“ä½œçš„bashè„šæœ¬</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">shell</span><span class="o">/</span><span class="n">reboot</span><span class="o">.</span><span class="n">sh</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">shell</span><span class="o">/</span><span class="n">shop</span><span class="o">.</span><span class="n">sh</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="err">`</span><span class="o">--</span> <span class="o">./</span><span class="n">shell</span><span class="o">/</span><span class="n">uwsgi_day06</span><span class="o">.</span><span class="n">ini</span>
</span></span><span class="line"><span class="cl"><span class="o">|--</span> <span class="o">./</span><span class="n">utils</span><span class="err">ã€</span><span class="n">å°çš„åŠŸèƒ½åº“</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">utils</span><span class="o">/</span><span class="n">__pycache__</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="n">ç•¥</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">utils</span><span class="o">/</span><span class="n">aliyun</span><span class="o">.</span><span class="n">py</span><span class="err">ã€</span><span class="n">çŸ­ä¿¡æ”¶å‘</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">utils</span><span class="o">/</span><span class="n">bootstrap</span><span class="o">.</span><span class="n">py</span><span class="err">ã€</span><span class="n">bootstrapæ ·å¼æ¸²æŸ“è„šæœ¬</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">utils</span><span class="o">/</span><span class="n">encrypt</span><span class="o">.</span><span class="n">py</span><span class="err">ã€</span><span class="n">å¯†ç åŠ è§£å¯†</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">utils</span><span class="o">/</span><span class="n">group</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">utils</span><span class="o">/</span><span class="n">link</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">utils</span><span class="o">/</span><span class="n">md</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">utils</span><span class="o">/</span><span class="n">pager</span><span class="o">.</span><span class="n">py</span><span class="err">ã€</span><span class="n">åˆ†é¡µç»„ä»¶</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">utils</span><span class="o">/</span><span class="n">response</span><span class="o">.</span><span class="n">py</span><span class="err">ã€</span><span class="n">responseç±»</span><span class="err">ï¼Œ</span><span class="n">ç”¨äºæ–¹ä¾¿æ„å»ºè¿”å›å€¼</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl"><span class="o">|</span>   <span class="err">`</span><span class="o">--</span> <span class="o">./</span><span class="n">utils</span><span class="o">/</span><span class="n">video</span><span class="o">.</span><span class="n">py</span><span class="err">ã€</span><span class="n">è·å–è§†é¢‘åŸæ’­æ”¾é‡çš„è„šæœ¬</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl"><span class="err">`</span><span class="o">--</span> <span class="o">./</span><span class="n">web</span><span class="err">ã€</span><span class="n">å•app</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl">    <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">__pycache__</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|--</span> <span class="n">ç•¥</span>
</span></span><span class="line"><span class="cl">    <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">admin</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">apps</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">forms</span><span class="err">ã€</span><span class="n">ç¼–å†™formç»„ä»¶ç”¨äºç”Ÿæˆè¡¨å•</span><span class="err">ï¼Œ</span><span class="n">æ ¡éªŒæäº¤ä¿¡æ¯</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">forms</span><span class="o">/</span><span class="n">__pycache__</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|</span>   <span class="err">`</span><span class="o">--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">forms</span><span class="o">/</span><span class="n">__pycache__</span><span class="o">/</span><span class="n">account</span><span class="o">.</span><span class="n">cpython</span><span class="o">-</span><span class="mf">39.</span><span class="n">pyc</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="err">`</span><span class="o">--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">forms</span><span class="o">/</span><span class="n">account</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">migrations</span><span class="err">ã€</span><span class="n">æ•°æ®åº“æ“ä½œè®°å½•æ–‡ä»¶</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">migrations</span><span class="o">/</span><span class="mi">0001</span><span class="n">_initial</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|--</span> <span class="n">ç•¥</span>
</span></span><span class="line"><span class="cl">    <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">models</span><span class="o">.</span><span class="n">py</span><span class="err">ã€</span><span class="n">ç¼–å†™æ•°æ®åº“ç»“æ„</span><span class="err">ï¼Œ</span><span class="n">å­—æ®µç­‰ç­‰</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl">    <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">static</span><span class="err">ã€</span><span class="n">é™æ€æ–‡ä»¶å­˜æ”¾ç›®å½•</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">static</span><span class="o">/</span><span class="n">css</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">static</span><span class="o">/</span><span class="n">css</span><span class="o">/</span><span class="n">commons</span><span class="o">.</span><span class="n">css</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="n">ç•¥</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">static</span><span class="o">/</span><span class="n">images</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|</span>   <span class="err">`</span><span class="o">--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">static</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">default</span><span class="o">.</span><span class="n">png</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">static</span><span class="o">/</span><span class="n">js</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">static</span><span class="o">/</span><span class="n">js</span><span class="o">/</span><span class="n">JQuery3</span><span class="mf">.6.0</span><span class="o">.</span><span class="n">js</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="n">ç•¥</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="err">`</span><span class="o">--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">static</span><span class="o">/</span><span class="n">plugins</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>       <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">static</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">bootstrap</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>       <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">static</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">bootstrap</span><span class="o">/</span><span class="n">css</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>       <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">static</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">bootstrap</span><span class="o">/</span><span class="n">fonts</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>       <span class="o">|</span>   <span class="err">`</span><span class="o">--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">static</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">bootstrap</span><span class="o">/</span><span class="n">js</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>       <span class="err">`</span><span class="o">--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">static</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">font</span><span class="o">-</span><span class="n">awesome</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>           <span class="o">|--</span> <span class="n">ç•¥</span>
</span></span><span class="line"><span class="cl">    <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">templates</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="n">form</span><span class="o">.</span><span class="n">html</span><span class="err">ã€</span><span class="n">è¡¨å•æ˜¾ç¤ºæ¨¡æ¿</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="n">form2</span><span class="o">.</span><span class="n">html</span><span class="err">ã€</span><span class="n">è¡¨å•æ˜¾ç¤ºæ¨¡æ¿2</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="n">home</span><span class="o">.</span><span class="n">html</span><span class="err">ã€</span><span class="n">å„ç§é¡µé¢</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="n">include</span><span class="err">ã€</span><span class="n">include</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">delete_modal</span><span class="o">.</span><span class="n">html</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|</span>   <span class="err">`</span><span class="o">--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">search_group</span><span class="o">.</span><span class="n">html</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="n">layout</span><span class="o">.</span><span class="n">html</span><span class="err">ã€</span><span class="n">ç”¨äºç»§æ‰¿çš„æ¨¡æ¿æ–‡ä»¶</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="n">tag</span><span class="err">ã€</span><span class="n">tag</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|</span>   <span class="err">`</span><span class="o">--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="n">tag</span><span class="o">/</span><span class="n">my_menu</span><span class="o">.</span><span class="n">html</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="err">`</span><span class="o">--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="n">transaction_list</span><span class="o">.</span><span class="n">html</span>
</span></span><span class="line"><span class="cl">    <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">templatetags</span><span class="err">ã€</span><span class="n">å¤„ç†å¤æ‚é¡µé¢æ¸²æŸ“é€»è¾‘</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">templatetags</span><span class="o">/</span><span class="n">__pycache__</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="n">ç•¥</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">templatetags</span><span class="o">/</span><span class="n">color</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">templatetags</span><span class="o">/</span><span class="n">menu</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="o">|</span>   <span class="err">`</span><span class="o">--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">templatetags</span><span class="o">/</span><span class="n">permission</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">tests</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">    <span class="err">`</span><span class="o">--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">views</span><span class="err">ã€</span><span class="n">è§†å›¾å‡½æ•°</span><span class="err">ï¼Œ</span><span class="n">å¤„ç†é€»è¾‘</span><span class="err">ã€‘</span>
</span></span><span class="line"><span class="cl">        <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">views</span><span class="o">/</span><span class="n">__pycache__</span>
</span></span><span class="line"><span class="cl">        <span class="o">|</span>   <span class="o">|--</span> <span class="n">ç•¥</span>
</span></span><span class="line"><span class="cl">        <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">views</span><span class="o">/</span><span class="n">account</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">        <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">views</span><span class="o">/</span><span class="n">customer</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">        <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">views</span><span class="o">/</span><span class="n">level</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">        <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">views</span><span class="o">/</span><span class="n">my_order</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">        <span class="o">|--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">views</span><span class="o">/</span><span class="n">my_transaction</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">        <span class="err">`</span><span class="o">--</span> <span class="o">./</span><span class="n">web</span><span class="o">/</span><span class="n">views</span><span class="o">/</span><span class="n">policy</span><span class="o">.</span><span class="n">py</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><font style="color:rgb(39, 38, 43);">ç»å…¸çš„MVCè®¾è®¡æ¨¡å¼åŠå…¶ä¼˜ç‚¹ï¼š</font></p>
<p><font style="color:rgb(92, 89, 98);">MVCå³ Model-View-Controller(æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨) ï¼Œæ˜¯ç»å…¸çš„è½¯ä»¶å¼€å‘è®¾è®¡æ¨¡å¼</font></p>
<ul>
<li><strong><font style="color:rgb(92, 89, 98);">Model (æ¨¡å‹)</font></strong><font style="color:rgb(92, 89, 98);"> ï¼š ç®€è€Œè¨€ä¹‹å³æ•°æ®æ¨¡å‹ã€‚æ¨¡å‹ä¸æ˜¯æ•°æ®æœ¬èº«ï¼ˆæ¯”å¦‚æ•°æ®åº“é‡Œçš„æ•°æ®ï¼‰ï¼Œè€Œæ˜¯æŠ½è±¡çš„æè¿°æ•°æ®çš„æ„æˆå’Œé€»è¾‘å…³ç³»ã€‚é€šå¸¸æ¨¡å‹åŒ…æ‹¬äº†æ•°æ®è¡¨çš„å„ä¸ªå­—æ®µï¼ˆæ¯”å¦‚äººçš„å¹´é¾„å’Œå‡ºç”Ÿæ—¥æœŸï¼‰å’Œç›¸äº’å…³ç³»ï¼ˆå•å¯¹å•ï¼Œå•å¯¹å¤šå…³ç³»ç­‰)ã€‚Webå¼€å‘æ¡†æ¶ä¼šæ ¹æ®æ¨¡å‹çš„å®šä¹‰æ¥è‡ªåŠ¨ç”Ÿæˆæ•°æ®è¡¨ã€‚</font></li>
<li><strong><font style="color:rgb(92, 89, 98);">View (è§†å›¾)</font></strong><font style="color:rgb(92, 89, 98);">ï¼š ä¸»è¦ç”¨äºæ˜¾ç¤ºæ•°æ®ï¼Œç”¨æ¥å±•ç¤ºç”¨æˆ·å¯ä»¥çœ‹åˆ°çš„å†…å®¹æˆ–æä¾›ç”¨æˆ·å¯ä»¥è¾“å…¥æˆ–æ“ä½œçš„ç•Œé¢ã€‚æ•°æ®æ¥æºäºå“ªé‡Œï¼Ÿå½“ç„¶æ˜¯æ•°æ®åº“å•¦ã€‚é‚£ä¹ˆç”¨æˆ·è¾“å…¥çš„æ•°æ®ç»™è°? å½“ç„¶æ˜¯ç»™æ§åˆ¶å™¨å•¦ã€‚</font></li>
<li><strong><font style="color:rgb(92, 89, 98);">Controller(æ§åˆ¶å™¨)</font></strong><font style="color:rgb(92, 89, 98);">ï¼šåº”ç”¨ç¨‹åºä¸­å¤„ç†ç”¨æˆ·äº¤äº’çš„éƒ¨åˆ†ã€‚é€šå¸¸æ§åˆ¶å™¨è´Ÿè´£ä»è§†å›¾è¯»å–æ•°æ®ï¼Œæ§åˆ¶ç”¨æˆ·è¾“å…¥ï¼Œå¹¶å‘æ¨¡å‹å‘é€æ•°æ®ï¼ˆæ¯”å¦‚å¢åŠ æˆ–æ›´æ–°æ•°æ®è¡¨ï¼‰ã€‚</font></li>
</ul>
<p><font style="color:rgb(39, 38, 43);">MVCè®¾è®¡æ¨¡å¼</font><font style="color:rgb(92, 89, 98);">å®ç°äº†è½¯ä»¶æˆ–ç½‘ç»œåº”ç”¨å¼€å‘è¿‡ç¨‹ä¸­æ•°æ®ã€ä¸šåŠ¡é€»è¾‘å’Œç”¨æˆ·ç•Œé¢çš„åˆ†ç¦»ï¼Œä½¿è½¯ä»¶å¼€å‘æ›´æ¸…æ™°ï¼Œä¹Ÿæ˜¯ç»´æŠ¤å˜å¾—æ›´å®¹æ˜“ã€‚è¿™ä¸é™æ€ç½‘é¡µè®¾è®¡ä¸­ä½¿ç”¨htmlå’Œcsså®ç°äº†å†…å®¹å’Œæ ·å¼çš„åˆ†ç¦»æ˜¯åŒä¸€ä¸ªé“ç†ã€‚</font></p>
<p><font style="color:rgb(92, 89, 98);"></font></p>
<p>Djangoçš„MVTè®¾è®¡æ¨¡å¼ç”±Modelæ¨¡å‹ï¼ŒViewï¼ˆè§†å›¾ï¼‰å’ŒTemplateï¼ˆæ¨¡æ¿ï¼‰ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«å¯¹åº”å•ä¸ª<font style="color:rgb(92, 89, 98);">appç›®å½•ä¸‹çš„models.py, views.pyå’Œtemplatesæ–‡ä»¶å¤¹</font></p>
<blockquote>
<p>å› å®é™…å¼€å‘æ—¶viewå‡½æ•°è¿‡å¤šï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†é€šå¸¸ä½¿ç”¨viewsç›®å½•å–ä»£å•ä¸ªview.pyæ–‡ä»¶ï¼Œåœ¨viewsç›®å½•ä¸‹æŒ‰åŠŸèƒ½ç¼–å†™å„ä¸ªpyæ–‡ä»¶</p></blockquote>
<ul>
<li><strong><font style="color:rgb(92, 89, 98);">Django Model(æ¨¡å‹)</font></strong><font style="color:rgb(92, 89, 98);">: è¿™ä¸ªä¸ç»å…¸MVCæ¨¡å¼ä¸‹çš„æ¨¡å‹Modelå·®ä¸å¤šã€‚</font></li>
<li><strong><font style="color:rgb(92, 89, 98);">Django View(è§†å›¾)</font></strong><font style="color:rgb(92, 89, 98);">: è¿™ä¸ªä¸MVCä¸‹çš„æ§åˆ¶å™¨Controlleræ›´åƒã€‚è§†å›¾ä¸ä»…è´Ÿè´£æ ¹æ®ç”¨æˆ·è¯·æ±‚ä»æ•°æ®åº“è¯»å–æ•°æ®ã€æŒ‡å®šå‘ç”¨æˆ·å±•ç¤ºæ•°æ®çš„æ–¹å¼(ç½‘é¡µæˆ–jsonæ•°æ®), è¿˜å¯ä»¥æŒ‡å®šæ¸²æŸ“æ¨¡æ¿å¹¶å¤„ç†ç”¨æˆ·æäº¤çš„æ•°æ®ã€‚</font></li>
<li><strong><font style="color:rgb(92, 89, 98);">Django Template(æ¨¡æ¿)</font></strong><font style="color:rgb(92, 89, 98);">: è¿™ä¸ªä¸ç»å…¸MVCæ¨¡å¼ä¸‹çš„è§†å›¾Viewä¸€è‡´ã€‚æ¨¡æ¿ç”¨æ¥å‘ˆç°Django viewä¼ æ¥çš„æ•°æ®ï¼Œä¹Ÿå†³å®šäº†ç”¨æˆ·ç•Œé¢çš„å¤–è§‚ã€‚Templateé‡Œé¢ä¹ŸåŒ…å«äº†è¡¨å•ï¼Œå¯ä»¥ç”¨æ¥æœé›†ç”¨æˆ·çš„è¾“å…¥å†…å®¹ã€‚</font></li>
</ul>
<p><font style="color:rgb(92, 89, 98);"></font></p>
<p><font style="color:rgb(92, 89, 98);">Djangoå·¥ä½œæµç¨‹ï¼š</font></p>
<p><font style="color:rgb(92, 89, 98);">å½“ç”¨æˆ·å‘æ¥ä¸€ä¸ªè¯·æ±‚(request)æ—¶ï¼ŒDjangoä¼šå¯¹è¯·æ±‚å¤´ä¿¡æ¯è¿›è¡Œè§£æï¼Œè§£æå‡ºç”¨æˆ·éœ€è¦è®¿é—®çš„urlåœ°å€ï¼Œç„¶åæ ¹æ®è·¯ç”±urls.pyä¸­çš„å®šä¹‰çš„å¯¹åº”å…³ç³»æŠŠè¯·æ±‚è½¬å‘åˆ°ç›¸åº”çš„è§†å›¾å¤„ç†ã€‚è§†å›¾ä¼šä»æ•°æ®åº“è¯»å–éœ€è¦çš„æ•°æ®ï¼ŒæŒ‡å®šæ¸²æŸ“æ¨¡æ¿ï¼Œæœ€åè¿”å›å“åº”æ•°æ®</font></p>
<p><img src="/post/python/Django/1732094182588-90c28716-2202-46cf-adf8-e20294930f80.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>ç®€æ˜“å¼€å‘æµç¨‹</p>
<ul>
<li>æ–°å»ºappå¹¶æ³¨å†Œ</li>
</ul>
<p>å…ˆä½¿ç”¨<code>python manage.py startapp web</code>åˆ›å»ºä¸€ä¸ªåä¸ºwebçš„appï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°settings.pyä¸­</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.contrib.admin&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.contrib.auth&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.contrib.contenttypes&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.contrib.sessions&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.contrib.messages&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.contrib.staticfiles&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;web.apps.WebConfig&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>åœ¨urlsä¸­æ·»åŠ è·¯å¾„ä¸è§†å›¾å‡½æ•°å¯¹åº”å…³ç³»</li>
</ul>
<p><img src="/post/python/Django/1732094938489-95a7b53c-5abc-42fa-a12a-0c1566f89138.png"
	
	
	
	loading="lazy"
	
	
></p>
<ul>
<li>åˆ›å»ºæ¨¡å‹</li>
</ul>
<p>åœ¨appä¸‹æ–°å»ºåä¸ºmodels.pyï¼Œåœ¨å…¶ä¸­ç¼–å†™æ•°æ®åº“å­—æ®µåŠè¡¨ä¸è¡¨çš„å…³è”å…³ç³»</p>
<p><img src="/post/python/Django/1732095241289-bb64416f-c9c6-4e57-b3a1-79e75148829f.png"
	
	
	
	loading="lazy"
	
	
></p>
<p><font style="color:rgb(92, 89, 98);">ä½¿ç”¨</font><code>&lt;font style=&quot;color:rgb(92, 89, 98);background-color:rgb(245, 246, 250);&quot;&gt;python manage.py makemigrations&lt;/font&gt;</code><font style="color:rgb(92, 89, 98);">å’Œ</font><code>&lt;font style=&quot;color:rgb(92, 89, 98);background-color:rgb(245, 246, 250);&quot;&gt;python manage.py migrate&lt;/font&gt;</code><font style="color:rgb(92, 89, 98);">å‘½ä»¤è®©djangoåœ¨æ•°æ®åº“ä¸­åˆ›å»ºæ•°æ®è¡¨</font></p>
<ul>
<li>åˆ›å»ºè§†å›¾å‡½æ•°</li>
</ul>
<p>åœ¨appä¸‹æ–°å»ºåä¸ºviewsçš„ç›®å½•ï¼Œæ ¹æ®ä¸šåŠ¡åŠŸèƒ½åˆ›å»ºaccount.pyï¼Œå¹¶åœ¨å…¶ä¸­å®šä¹‰loginå‡½æ•°ï¼Œä»æ•°æ®åº“è¯»å–æ•°æ®ï¼Œå¤„ç†é€»è¾‘ï¼ŒæŒ‡å®šæ¸²æŸ“æ¨¡æ¿å¹¶å°†æ•°æ®ä¼ é€’ç»™å¯¹åº”æ¨¡æ¿</p>
<p><img src="/post/python/Django/1732095370662-e9a615cc-c9d0-4b4c-98d5-464042123b53.png"
	
	
	
	loading="lazy"
	
	
></p>
<ul>
<li>ç¼–è¾‘æ¨¡æ¿</li>
</ul>
<p>åˆ›å»ºåœ¨web/templatesä¸‹åˆ›å»ºlogin.htmlæ–‡ä»¶<font style="color:rgb(92, 89, 98);">ç”¨äºå±•ç¤ºè§†å›¾ä¼ æ¥çš„æ•°æ®ï¼ŒDjangoè¿˜æä¾›äº†è‡ªå·±çš„æ¨¡æ¿è¯­è¨€ç”¨æ¥æ¸²æŸ“æ¨¡æ¿ã€‚</font></p>
<p><img src="/post/python/Django/1732095544263-c6c72fdd-a862-458a-9ca9-fa81008113c5.png"
	
	
	
	loading="lazy"
	
	
></p>
<h2 id="è·¯ç”±é…ç½®">è·¯ç”±é…ç½®
</h2><p><font style="color:rgb(92, 89, 98);">é¡¹ç›®æ–‡ä»¶å¤¹å’Œæ¯ä¸ªåº”ç”¨(app)ç›®å½•ä¸‹çš„</font><code>&lt;font style=&quot;color:rgb(92, 89, 98);background-color:rgb(245, 246, 250);&quot;&gt;urls.py&lt;/font&gt;</code><font style="color:rgb(92, 89, 98);">æ–‡ä»¶æ„æˆäº†Djangoçš„è·¯ç”±é…ç½®ç³»ç»Ÿ(URLconf)ã€‚æœåŠ¡å™¨æ”¶åˆ°ç”¨æˆ·è¯·æ±‚åï¼Œä¼šæ ¹æ®ç”¨æˆ·è¯·æ±‚çš„urlåœ°å€å’Œurls.pyé‡Œé…ç½®çš„url-è§†å›¾æ˜ å°„å…³ç³»ï¼Œå»è°ƒç”¨æ‰§è¡Œç›¸åº”çš„è§†å›¾å‡½æ•°æˆ–è§†å›¾ç±»ï¼Œæœ€åç”±è§†å›¾è¿”å›ç»™å®¢æˆ·ç«¯æ•°æ®</font></p>
<h3 id="urlconfå¦‚ä½•å·¥ä½œ">URLconfå¦‚ä½•å·¥ä½œ
</h3><h4 id="æ‰‹åŠ¨è·¯ç”±åˆ†å‘">æ‰‹åŠ¨è·¯ç”±åˆ†å‘
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">apps.web</span> <span class="kn">import</span> <span class="n">views</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;user/add/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">	<span class="n">path</span><span class="p">(</span><span class="s1">&#39;user/delete/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">	<span class="n">path</span><span class="p">(</span><span class="s1">&#39;user/edit/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">	<span class="n">path</span><span class="p">(</span><span class="s1">&#39;user/list/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="c1"># æå–å…¬å…±éƒ¨åˆ†ï¼Œé˜²æ­¢é‡å¤ç¼–å†™</span>
</span></span><span class="line"><span class="cl">	<span class="n">path</span><span class="p">(</span><span class="s1">&#39;user/&#39;</span><span class="p">,</span> <span class="p">([</span>
</span></span><span class="line"><span class="cl">	                   <span class="n">path</span><span class="p">(</span><span class="s1">&#39;add/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">	                   <span class="n">path</span><span class="p">(</span><span class="s1">&#39;delete/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>   <span class="c1"># /user/delete/</span>
</span></span><span class="line"><span class="cl">	                   <span class="n">path</span><span class="p">(</span><span class="s1">&#39;edit/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">	                   <span class="n">path</span><span class="p">(</span><span class="s1">&#39;list/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">	               <span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="includeappå°†åŠŸèƒ½æ‹†åˆ†åˆ°ä¸åŒçš„appä¸­">include+appï¼Œå°†åŠŸèƒ½æ‹†åˆ†åˆ°ä¸åŒçš„appä¸­
</h4><p>è¦æŠŠappçš„urlsåŠ åˆ°é¡¹ç›®çš„URLé…ç½®ä¸­</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">include</span><span class="p">,</span> <span class="n">path</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;web/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s1">&#39;apps.web.urls&#39;</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">include</span><span class="p">,</span> <span class="n">path</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">apps.api</span> <span class="kn">import</span> <span class="n">views</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># web/auth</span>
</span></span><span class="line"><span class="cl">    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;auth/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">auth</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="urlè®¾è®¡æ–¹æ³•">URLè®¾è®¡æ–¹æ³•
</h3><h4 id="pathfont-stylecolorrgb92-89-98background-colorrgb245-246-250å˜é‡ç±»å‹å˜é‡åfont">path<code>&lt;font style=&quot;color:rgb(92, 89, 98);background-color:rgb(245, 246, 250);&quot;&gt;&lt;å˜é‡ç±»å‹:å˜é‡å&gt;&lt;/font&gt;</code>
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;news/&lt;int:nid&gt;/edit/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">news</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>intï¼Œæ•´æ•°</li>
<li>strï¼Œå­—ç¬¦ä¸²</li>
<li>slugï¼Œå­—æ¯+æ•°å­—+ä¸‹åˆ’çº¿+-</li>
<li>uuidï¼Œuuidæ ¼å¼</li>
<li>pathï¼Œè·¯å¾„ï¼Œå¯ä»¥åŒ…å«/</li>
</ul>
<h4 id="re_pathpå˜é‡åè¡¨è¾¾å¼">re_path<code>(?p&lt;å˜é‡å&gt;è¡¨è¾¾å¼)</code>
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">	<span class="n">re_path</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;user/(?P&lt;xxid&gt;\w+-\d+)/(?P&lt;yid&gt;\d+)/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">user</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è·¯ç”±åˆ†å‘æœ¬è´¨">è·¯ç”±åˆ†å‘æœ¬è´¨
</h3><p>URLå¯¹åº”å‡½æ•°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">path</span><span class="p">(</span><span class="s1">&#39;user/add/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>URLå¯¹åº”å…ƒç»„</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">path</span><span class="p">(</span><span class="s1">&#39;user/&#39;</span><span class="p">,</span>    <span class="p">(</span><span class="n">å…ƒç´ </span><span class="p">,</span><span class="n">appnameå…ƒç´ </span><span class="p">,</span><span class="n">namespanceå…ƒç´ </span><span class="p">)</span>    <span class="p">),</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">path</span><span class="p">(</span><span class="s1">&#39;user/&#39;</span><span class="p">,</span>    <span class="n">include</span><span class="p">(</span><span class="s2">&#34;apps.api.urls&#34;</span><span class="p">)</span>    <span class="p">),</span><span class="c1"># includeæœ¬è´¨è¿”å›çš„å°±æ˜¯ä¸€ä¸ªå½¢å¦‚([],None,None))çš„å…ƒç»„</span>
</span></span><span class="line"><span class="cl"><span class="n">path</span><span class="p">(</span><span class="s1">&#39;user/&#39;</span><span class="p">,</span>     <span class="p">([],</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>     <span class="p">),</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>includeæºç è§£è¯»</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">include</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">app_name</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">urlconf_module</span><span class="p">,</span> <span class="n">app_name</span> <span class="o">=</span> <span class="n">arg</span>  <span class="c1"># urlconf_moduleä¸ºåˆ—è¡¨ï¼Œapp_nameä¸ºNone</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="o">...</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">urlconf_module</span> <span class="o">=</span> <span class="n">arg</span> <span class="c1"># urlconf_moduleè¢«èµ‹å€¼ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å¦‚&#34;apps.api.urls&#34;</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">urlconf_module</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">urlconf_module</span> <span class="o">=</span> <span class="n">import_module</span><span class="p">(</span><span class="n">urlconf_module</span><span class="p">)</span> <span class="c1"># urlconf_moduleä¸ºå¯¼å…¥çš„æ¨¡å—å¦‚urls</span>
</span></span><span class="line"><span class="cl">    <span class="n">patterns</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">urlconf_module</span><span class="p">,</span> <span class="s1">&#39;urlpatterns&#39;</span><span class="p">,</span> <span class="n">urlconf_module</span><span class="p">)</span>  <span class="c1"># åˆ©ç”¨åå°„è¯­æ³•å»å–urlsæ¨¡å—ä¸­çš„å€¼ï¼Œæ­¤å¤„patternsä¸ºä¸€ä¸ªåˆ—è¡¨ï¼Œå½“urlconf_moduleä¸ºåˆ—è¡¨æ—¶ï¼Œpatternsä¸ºé»˜è®¤å€¼å³åˆ—è¡¨</span>
</span></span><span class="line"><span class="cl">    <span class="n">app_name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">urlconf_module</span><span class="p">,</span> <span class="s1">&#39;app_name&#39;</span><span class="p">,</span> <span class="n">app_name</span><span class="p">)</span>  <span class="c1"># app_nameä¸ºNone</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">namespace</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">app_name</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">raise</span> <span class="n">ImproperlyConfigured</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;Specifying a namespace in include() without providing an app_name &#39;</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;is not supported. Set the app_name attribute in the included &#39;</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;module, or pass a 2-tuple containing the list of patterns and &#39;</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;app_name instead.&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">namespace</span> <span class="o">=</span> <span class="n">namespace</span> <span class="ow">or</span> <span class="n">app_name</span>  <span class="c1"># namespace=app_name=None</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">patterns</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">url_pattern</span> <span class="ow">in</span> <span class="n">patterns</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">pattern</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">url_pattern</span><span class="p">,</span> <span class="s1">&#39;pattern&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">LocalePrefixPattern</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="k">raise</span> <span class="n">ImproperlyConfigured</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="s1">&#39;Using i18n_patterns in an included URLconf is not allowed.&#39;</span>
</span></span><span class="line"><span class="cl">                <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">(</span><span class="n">urlconf_module</span><span class="p">,</span> <span class="n">app_name</span><span class="p">,</span> <span class="n">namespace</span><span class="p">)</span>  <span class="c1"># ([],None,None)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">path</span><span class="p">(</span><span class="s1">&#39;user/add/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="n">path</span><span class="p">(</span><span class="s1">&#39;user/delete/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="n">path</span><span class="p">(</span><span class="s1">&#39;user/edit/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="n">path</span><span class="p">(</span><span class="s1">&#39;user/list/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">path</span><span class="p">(</span><span class="s1">&#39;user/&#39;</span><span class="p">,</span> <span class="p">([</span>
</span></span><span class="line"><span class="cl">                   <span class="n">path</span><span class="p">(</span><span class="s1">&#39;add/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                   <span class="n">path</span><span class="p">(</span><span class="s1">&#39;delete/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                   <span class="n">path</span><span class="p">(</span><span class="s1">&#39;edit/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                   <span class="n">path</span><span class="p">(</span><span class="s1">&#39;list/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">               <span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl">               
</span></span><span class="line"><span class="cl">               
</span></span><span class="line"><span class="cl"><span class="n">path</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(([</span>
</span></span><span class="line"><span class="cl">                           <span class="n">path</span><span class="p">(</span><span class="s1">&#39;add/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                           <span class="n">path</span><span class="p">(</span><span class="s1">&#39;delete/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                           <span class="n">path</span><span class="p">(</span><span class="s1">&#39;edit/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                           <span class="n">path</span><span class="p">(</span><span class="s1">&#39;list/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                       <span class="p">],</span> <span class="kc">None</span><span class="p">))),</span>
</span></span><span class="line"><span class="cl">                       
</span></span><span class="line"><span class="cl"><span class="n">include</span><span class="p">(</span><span class="s2">&#34;apps.api.urls&#34;</span><span class="p">)</span>  <span class="c1"># ä¸€èˆ¬æ˜¯æ¯ä¸ªappä¸­çš„urlsï¼Œä½†å…¶å®æ˜¯å¯ä»¥éšæ„å†™çš„ï¼Œåªè¦å…¶ä¸­æœ‰urlpatternså‚æ•°å³å¯</span>
</span></span><span class="line"><span class="cl"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="name">name
</h3><p><font style="color:rgb(92, 89, 98);">ç›¸å½“äºç»™æ¯ä¸ªURLå–äº†ä¸ªå…¨å±€å˜é‡çš„åå­—ã€‚å¯ä»¥è®©ä½ èƒ½å¤Ÿåœ¨Djangoçš„ä»»æ„å¤„ï¼Œå°¤å…¶æ˜¯æ¨¡æ¿å†…æ˜¾å¼åœ°å¼•ç”¨å®ƒ</font></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;Login/&lt;str:role&gt;/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&#34;v1&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">re_path</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;auth/(\d+)/(\w+)/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">auth</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&#34;v2&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">re_path</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;xxxx/(?P&lt;nid&gt;\d+)/(?P&lt;tpl&gt;\w+)/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">auth</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&#34;v3&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>åœ¨è§†å›¾å‡½æ•°ä¸­ç”ŸæˆURL</li>
</ul>
<blockquote>
<p>æœ‰å‚æ•°åä¼ å‚ç”¨kargs={k1:k2}</p>
<p>æ— å‚æ•°åä¼ å‚ç”¨args=(v1,v2)</p></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">reverse</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">url1</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s2">&#34;v1&#34;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&#34;role&#34;</span><span class="p">:</span> <span class="s2">&#34;hhh&#34;</span><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="n">url2</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s2">&#34;v2&#34;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">666</span><span class="p">,</span> <span class="s2">&#34;hhh&#34;</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>åœ¨æ¨¡æ¿ä¸­ç”ŸæˆURL</li>
</ul>
<blockquote>
<p><code>&lt;font style=&quot;color:rgb(92, 89, 98);background-color:rgb(245, 246, 250);&quot;&gt;url&lt;/font&gt;</code><font style="color:rgb(92, 89, 98);">æ˜¯ä¸ªæ¨¡æ¿æ ‡ç­¾ï¼Œå…¶ä½œç”¨æ˜¯å¯¹å‘½åçš„urlè¿›è¡Œæ–¹å‘è§£æï¼ŒåŠ¨æ€ç”Ÿæˆé“¾æ¥ã€‚</font></p>
<p><font style="color:rgb(92, 89, 98);">å‘½åçš„urlé‡Œæœ‰å‡ ä¸ªå‚æ•°ï¼Œä½¿ç”¨</font><code>&lt;font style=&quot;color:rgb(92, 89, 98);background-color:rgb(245, 246, 250);&quot;&gt;url&lt;/font&gt;</code><font style="color:rgb(92, 89, 98);">æ¨¡æ¿æ ‡ç­¾åå‘ç”ŸæˆåŠ¨æ€é“¾æ¥æ—¶ï¼Œå°±éœ€è¦å‘å®ƒä¼ é€’å‡ ä¸ªå‚æ•°</font></p>
<p>æœ‰åå­—çš„è¦ç»™ä»–ä¼ å€¼ï¼Œæ— åå­—çš„ç©ºæ ¼åˆ†éš”å³å¯</p></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&#34;{</span><span class="si">% u</span><span class="s2">rl &#39;v1&#39; role=&#34;</span><span class="mi">111</span><span class="s2">&#34; %}&#34;</span><span class="o">&gt;</span><span class="n">è·³è½¬</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&#34;{</span><span class="si">% u</span><span class="s2">rl &#39;v2&#39; 666 &#34;</span><span class="mi">111</span><span class="s2">&#34; %}&#34;</span><span class="o">&gt;</span><span class="n">è·³è½¬</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æ‹“å±•</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">ç”¨nameå±æ€§é…åˆåšæƒé™ç®¡ç†</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="namespace">namespace
</h3><p>å‡è®¾ä¸åŒçš„appï¼ˆæ¯”å¦‚webå’Œapiï¼‰ä¸­æœ‰åŒåurlè¯¥å¦‚ä½•åŒºåˆ†ï¼Ÿ</p>
<p>ä¸»è·¯ç”±</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span><span class="p">,</span> <span class="n">re_path</span><span class="p">,</span> <span class="n">include</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å¾ˆå¤šåŠŸèƒ½ï¼Œå¾ˆå¤šURL</span>
</span></span><span class="line"><span class="cl"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;api/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s2">&#34;apps.api.urls&#34;</span><span class="p">,</span><span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;x1&#39;</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl">    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;web/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s2">&#34;apps.web.urls&#34;</span><span class="p">,</span><span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;x2&#39;</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>api/urls.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span><span class="p">,</span> <span class="n">re_path</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>
</span></span><span class="line"><span class="cl"><span class="c1"># å¾ˆå¤šåŠŸèƒ½ï¼Œå¾ˆå¤šURL</span>
</span></span><span class="line"><span class="cl"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;login/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">login</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;login&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;auth/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">auth</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;auth&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">app_name</span> <span class="o">=</span> <span class="s2">&#34;api&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>web/urls.py</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span><span class="p">,</span> <span class="n">re_path</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>
</span></span><span class="line"><span class="cl"><span class="c1"># å¾ˆå¤šåŠŸèƒ½ï¼Œå¾ˆå¤šURL</span>
</span></span><span class="line"><span class="cl"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;home/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">home</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;order/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">order</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;order&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;auth/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">order</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;auth&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">app_name</span> <span class="o">=</span> <span class="s2">&#34;web&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><font style="color:rgb(92, 89, 98);">åªéœ€è¦åœ¨</font><code>&lt;font style=&quot;color:rgb(92, 89, 98);background-color:rgb(245, 246, 250);&quot;&gt;web/urls.py&lt;/font&gt;</code><font style="color:rgb(92, 89, 98);">åŠ ä¸Š</font><code>&lt;font style=&quot;color:rgb(92, 89, 98);background-color:rgb(245, 246, 250);&quot;&gt;app_name='web'&lt;/font&gt;</code><font style="color:rgb(92, 89, 98);">è¿™ä¸ªå‘½åç©ºé—´å³å¯</font></p>
<h4 id="è§†å›¾ä¸­ä½¿ç”¨"><font style="color:rgb(92, 89, 98);">è§†å›¾ä¸­ä½¿ç”¨</font>
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">reverse</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s2">&#34;x1:auth&#34;</span><span class="p">)</span>    <span class="c1"># /api/auth/</span>
</span></span><span class="line"><span class="cl"><span class="n">url2</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s2">&#34;x2:auth&#34;</span><span class="p">)</span>    <span class="c1"># /web/auth/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="æ¨¡æ¿ä¸­ä½¿ç”¨">æ¨¡æ¿ä¸­ä½¿ç”¨
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&#34;{</span><span class="si">% u</span><span class="s2">rl &#39;x1:auth&#39; %}&#34;</span><span class="o">&gt;</span><span class="n">è·³è½¬</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&#34;{</span><span class="si">% u</span><span class="s2">rl &#39;x2:auth&#39; %}&#34;</span><span class="o">&gt;</span><span class="n">è·³è½¬</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¡¥å……</p>
<p><img src="/post/python/Django/1732101851412-65b76dda-2530-4dce-a946-d35005525825.png"
	
	
	
	loading="lazy"
	
	
></p>
<p><img src="/post/python/Django/1732101903439-47168c0f-aa3d-41f4-8d00-bb46e599e925.png"
	
	
	
	loading="lazy"
	
	
></p>
<h3 id="urlæœ«å°¾çš„">urlæœ«å°¾çš„/
</h3><p><code>APPEND_SLASH</code>æ˜¯ä¸€ä¸ªè®¾ç½®é¡¹ï¼Œç”¨äºç¡®å®šDjangoæ˜¯å¦è‡ªåŠ¨ä¸ºæ²¡æœ‰å°¾éšæ–œæ ï¼ˆ<code>/</code>ï¼‰çš„URLæ·»åŠ æ–œæ ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>APPEND_SLASH</code>è®¾ç½®ä¸º<code>True</code>ï¼Œè¿™æ„å‘³ç€å¦‚æœç”¨æˆ·è¯·æ±‚çš„URLæ²¡æœ‰ä»¥æ–œæ ç»“å°¾ï¼ŒDjangoä¼šå‘å‡ºä¸€ä¸ª301é‡å®šå‘åˆ°å¸¦æœ‰å°¾éšæ–œæ çš„URL</p>
<h3 id="å½“å‰åŒ¹é…å¯¹è±¡">å½“å‰åŒ¹é…å¯¹è±¡
</h3><p><code>&lt;font style=&quot;color:rgb(6, 6, 7);&quot;&gt;ResolverMatch&lt;/font&gt;</code><font style="color:rgb(6, 6, 7);">å¯¹è±¡æ˜¯åœ¨URLè§£æè¿‡ç¨‹ä¸­åˆ›å»ºçš„ï¼Œå®ƒåŒ…å«äº†åŒ¹é…åˆ°çš„URLæ¨¡å¼çš„ç›¸å…³ä¿¡æ¯ã€‚å½“ä½ è®¿é—®ä¸€ä¸ªURLæ—¶ï¼ŒDjangoçš„URLè§£æå™¨ä¼šå°è¯•æ‰¾åˆ°åŒ¹é…çš„æ¨¡å¼ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ª</font><code>&lt;font style=&quot;color:rgb(6, 6, 7);&quot;&gt;ResolverMatch&lt;/font&gt;</code><font style="color:rgb(6, 6, 7);">å¯¹è±¡ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨è¯·æ±‚å¯¹è±¡çš„</font><code>&lt;font style=&quot;color:rgb(6, 6, 7);&quot;&gt;resolver_match&lt;/font&gt;</code><font style="color:rgb(6, 6, 7);">å±æ€§ä¸­ã€‚</font></p>
<p><code>&lt;font style=&quot;color:rgb(6, 6, 7);&quot;&gt;ResolverMatch&lt;/font&gt;</code><font style="color:rgb(6, 6, 7);">å¯¹è±¡åœ¨URLè§£æå‘ç”Ÿåæ‰è®¾ç½®ï¼Œè¿™æ„å‘³ç€å®ƒåœ¨æ‰€æœ‰è§†å›¾ä¸­éƒ½æ˜¯å¯ç”¨çš„ï¼Œä½†åœ¨URLè§£æå‘ç”Ÿå‰çš„ä¸­é—´ä»¶ä¸­ä¸å¯ç”¨ï¼ˆprocess_requestï¼‰</font></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">resolver_match</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">resolver_match</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½œç”¨</p>
<ul>
<li>ç›´æ¥è®¿é—®URLä¸­æ•è·çš„å‚æ•°</li>
<li>æ ¹æ®å‚æ•°ä¸åŒå¤„ç†è§†å›¾é€»è¾‘åˆ†æ”¯</li>
<li>URLåç§°è§£æï¼Œ<font style="color:rgb(6, 6, 7);">ç”¨æ¥åŠ¨æ€ç”Ÿæˆé“¾æ¥</font></li>
<li><font style="color:rgb(6, 6, 7);">ä¸­é—´ä»¶æ”¯æŒï¼Œåšæƒé™æ§åˆ¶</font></li>
</ul>
<h3 id="partial">partial
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">_xx</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">a1</span> <span class="o">+</span> <span class="n">a2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">data</span> <span class="o">=</span> <span class="n">_xx</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">_xx</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">a1</span> <span class="o">+</span> <span class="n">a2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">yy</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">_xx</span><span class="p">,</span> <span class="n">a2</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">data</span> <span class="o">=</span> <span class="n">yy</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/post/python/Django/1732102693440-7bbb4b99-7711-46b6-a0d9-981da50359f6.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>åˆ©ç”¨partialä½¿å¾—_pathå‡½æ•°ä¼ å…¥çš„Patternä¸åŒï¼Œå¤„ç†è·¯ç”±çš„æ–¹å¼ä¸åŒ</p>
<h2 id="è§†å›¾">è§†å›¾
</h2><h3 id="æ–‡ä»¶oræ–‡ä»¶å¤¹">æ–‡ä»¶oræ–‡ä»¶å¤¹
</h3><p>æ‰€æœ‰è§†å›¾å‡½æ•°æ”¾åœ¨ä¸€ä¸ªview.pyä¼šéš¾ä»¥ç»´æŠ¤ä¸”å½±å“å¯è¯»æ€§ï¼Œå»ºè®®æ ¹æ®åŠŸèƒ½ä¸šåŠ¡ä¸åŒå‘½åå¯¹åº”çš„pyæ–‡ä»¶ï¼Œå°†æ‰€æœ‰pyæ–‡ä»¶æ”¾åœ¨viewsç›®å½•ä¸‹</p>
<h3 id="ç»å¯¹å¯¼å…¥å’Œç›¸å¯¹å¯¼å…¥">ç»å¯¹å¯¼å…¥å’Œç›¸å¯¹å¯¼å…¥
</h3><p>åŸåˆ™ï¼š</p>
<p>èƒ½ç”¨ç»å¯¹å¯¼å…¥å°±ç”¨ç»å¯¹å¯¼å…¥ï¼Œå±‚çº§è¿‡æ·±ä¸æ–¹ä¾¿å†ç”¨ç›¸å¯¹å¯¼å…¥</p>
<p><strong>ä¸€å®šä¸è¦åœ¨é¡¹ç›®æ ¹ç›®å½•åšç›¸å¯¹å¯¼å…¥</strong></p>
<hr>
<h3 id="è§†å›¾å‚æ•°">è§†å›¾å‚æ•°
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&#34;login&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>requestæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<blockquote>
<p><font style="color:rgb(6, 6, 7);">requestæ˜¯ç”±Djangoçš„ä¸­é—´ä»¶ç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºå¹¶ä¼ é€’ç»™è§†å›¾çš„</font>ä¸€ä¸ªå¯¹è±¡ï¼Œå°è£…å­˜æ”¾äº†æµè§ˆå™¨å‘ç»™æœåŠ¡å™¨çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬è¯·æ±‚ç›¸å…³å†…å®¹å’Œdjangoé¢å¤–æ·»åŠ çš„æ•°æ®</p></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 1.å½“å‰URL  /api/login/</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">path_info</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 2.URLä¼ é€’çš„å‚æ•°</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;age&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 3.è¯·æ±‚æ–¹å¼  GET/POST</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 4.å¦‚æœpostè¯·æ±‚ï¼Œä¼ é€’è¯·æ±‚ä½“ï¼ˆåŸå§‹æ•°æ®ï¼‰</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>  <span class="c1"># b&#39;{&#34;code&#34;:&#34;083Sjmll2yla694F3bll2DguCM2SjmlG&#34;,&#34;unionId&#34;:&#34;oP6QCsyT_9bk1dfSaVf0GEV5Y-yE&#34;}&#39;  b&#39;v1=123&amp;v2=456&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 4.1 è¯·æ±‚ä½“+è¯·æ±‚å¤´       b&#39;v1=123&amp;v2=456&#39;  +  content-type:application/x-www-form-urlencoded</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;v1&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;v2&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 4.2 è¯·æ±‚ä½“+è¯·æ±‚å¤´   æ–‡ä»¶</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">FILES</span><span class="p">)</span>  <span class="c1"># æ–‡ä»¶æ ¼å¼           + content-type:multipart/form-data</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">FILES</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;n1&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">FILES</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;n2&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 5.è¯·æ±‚å¤´</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># {&#39;Content-Length&#39;: &#39;&#39;, &#39;Content-Type&#39;: &#39;text/plain&#39;, &#39;Host&#39;: &#39;127.0.0.1:8000&#39;, &#39;Connection&#39;: &#39;keep-alive&#39;, &#39;Cache-Control&#39;: &#39;max-age=0&#39;, &#39;Sec-Ch-Ua&#39;: &#39;&#34; Not A;Brand&#34;;v=&#34;99&#34;, &#34;Chromium&#34;;v=&#34;102&#34;, &#34;Google Chrome&#34;;v=&#34;102&#34;&#39;, &#39;Sec-Ch-Ua-Mobile&#39;: &#39;?0&#39;, &#39;Sec-Ch-Ua-Platform&#39;: &#39;&#34;macOS&#34;&#39;, &#39;Upgrade-Insecure-Requests&#39;: &#39;1&#39;, &#39;User-Agent&#39;: &#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36&#39;, &#39;Accept&#39;: &#39;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&#39;, &#39;Sec-Fetch-Site&#39;: &#39;none&#39;, &#39;Sec-Fetch-Mode&#39;: &#39;navigate&#39;, &#39;Sec-Fetch-User&#39;: &#39;?1&#39;, &#39;Sec-Fetch-Dest&#39;: &#39;document&#39;, &#39;Accept-Encoding&#39;: &#39;gzip, deflate, br&#39;, &#39;Accept-Language&#39;: &#39;zh-CN,zh;q=0.9,en;q=0.8,zh-TW;q=0.7&#39;, &#39;Cookie&#39;: &#39;csrftoken=CdidpKSGbLxzmOXnbmlkvrZep1eJmKLAA81T73UjcjxEnMOa4YOZqtc849AkYfUy&#39;}</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 5.1 è¯·æ±‚å¤´æœ‰ä¸ªç‰¹æ®Šçš„cookie</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># request.headers[&#39;cookie&#39;]  # &#39;csrftoken=CdidpKSGbLxzmOXnbmlkvrZep1eJmKLAA81T73UjcjxEnMOa4YOZqtc849AkYfUy;session=xxxx&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># {&#39;csrftoken&#39;: &#39;CdidpKSGbLxzmOXnbmlkvrZep1eJmKLAA81T73UjcjxEnMOa4YOZqtc849AkYfUy&#39;}</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">COOKIES</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 6.requestsä¸­å…¶ä»–å€¼</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">resolver_match</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&#34;login&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¡¥å……ï¼šrequestæºç è§£è¯»</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">_get_post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># å»è¯·æ±‚ä½“è§£æbodyèµ‹å€¼ç»™_post</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_post&#39;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">_load_post_and_files</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">_set_post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">post</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="bp">self</span><span class="o">.</span><span class="n">_post</span> <span class="o">=</span> <span class="n">post</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="nd">@property</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">FILES</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># å»è¯·æ±‚ä½“è§£æbodyèµ‹å€¼ç»™_files</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_files&#39;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">_load_post_and_files</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_files</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">POST</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_post</span><span class="p">,</span> <span class="n">_set_post</span><span class="p">)</span>  <span class="c1"># æŸ¥è¯¢æ—¶æ‰§è¡Œ_get_postï¼Œèµ‹å€¼æ—¶æ‰§è¡Œ_set_post</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>_load_post_and_files()å‡½æ•°è§£æ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">_load_post_and_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;Populate self._post and self._files if the content-type is a form type&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">!=</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_files</span> <span class="o">=</span> <span class="n">QueryDict</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_encoding</span><span class="p">),</span> <span class="n">MultiValueDict</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_started</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_body&#39;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">_mark_post_parse_error</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_type</span> <span class="o">==</span> <span class="s1">&#39;multipart/form-data&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_body&#39;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># Use already read data</span>
</span></span><span class="line"><span class="cl">            <span class="n">data</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_body</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_file_upload</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">META</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="n">MultiPartParserError</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># An error occurred while parsing POST data. Since when</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># formatting the error the request handler might access</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># self.POST, set self._post and self._file to prevent</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># attempts to parse POST data again.</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">_mark_post_parse_error</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="k">raise</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_type</span> <span class="o">==</span> <span class="s1">&#39;application/x-www-form-urlencoded&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_files</span> <span class="o">=</span> <span class="n">QueryDict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_encoding</span><span class="p">),</span> <span class="n">MultiValueDict</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_files</span> <span class="o">=</span> <span class="n">QueryDict</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_encoding</span><span class="p">),</span> <span class="n">MultiValueDict</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è¿”å›å€¼">è¿”å›å€¼
</h3><ul>
<li>HttpResponse</li>
<li>JsonResponse</li>
<li>render</li>
<li>redirect</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># 3.1 å­—ç¬¦ä¸²/å­—èŠ‚/æ–‡æœ¬æ•°æ®ï¼ˆå›¾ç‰‡éªŒè¯ç ï¼‰</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&#34;login&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 3.2 JSONæ ¼å¼ï¼ˆå‰åç«¯åˆ†ç¦»ã€appå°ç¨‹åºåç«¯ã€ajaxè¯·æ±‚ï¼‰</span>
</span></span><span class="line"><span class="cl"><span class="n">data_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;status&#34;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">33</span><span class="p">]}</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="n">JsonResponse</span><span class="p">(</span><span class="n">data_dict</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 3.3 é‡å®šå‘</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s2">&#34;https://www.baidu.com&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s2">&#34;http://127.0.0.1:8000/api/auth/&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s2">&#34;/api/auth/&#34;</span><span class="p">)</span>  <span class="c1"># çœç•¥http://127.0.0.1:8000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s2">&#34;auth&#34;</span><span class="p">)</span>  <span class="c1"># name</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">reverse</span>
</span></span><span class="line"><span class="cl"><span class="n">url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s2">&#34;auth&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>  <span class="c1"># name</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 3.4 æ¸²æŸ“</span>
</span></span><span class="line"><span class="cl"><span class="c1"># - a.æ‰¾åˆ° &#39;login.html&#39; å¹¶è¯»å–çš„å†…å®¹ï¼Œé—®é¢˜ï¼šå»å“ªé‡Œæ‰¾ï¼Ÿ</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -   é»˜è®¤å…ˆå»settings.TEMPLATES.DIRSæŒ‡å®šçš„è·¯å¾„æ‰¾ã€‚ï¼ˆå…¬å…±ï¼‰</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -   æŒ‰æ³¨å†Œé¡ºåºæ¯ä¸ªå·²æ³¨å†Œçš„appä¸­æ‰¾ä»–templatesç›®å½•ï¼Œå»è¿™ä¸ªç›®å½•ä¸­å¯»æ‰¾&#39;login.html&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -   ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒåŸåˆ™ï¼Œé‚£ä¸ªappä¸­çš„çš„æ¨¡æ¿ï¼Œå»å“ªä¸ªé‚£ä¸ªappä¸­å¯»æ‰¾ã€‚</span>
</span></span><span class="line"><span class="cl"><span class="c1"># - b.æ¸²æŸ“ï¼ˆæ›¿æ¢ï¼‰å¾—åˆ°æ›¿æ¢å®Œæˆçš„å­—ç¬¦ä¸²</span>
</span></span><span class="line"><span class="cl"><span class="c1"># - c.è¿”å›æµè§ˆå™¨</span>
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;api/login.html&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>htmlæ–‡ä»¶æ”¾ç½®</p>
<p><img src="/post/python/Django/1732103923915-1c02e27c-d9b9-4a1a-94da-f87b6d04111c.png"
	
	
	
	loading="lazy"
	
	
></p>
<h3 id="å“åº”å¤´">å“åº”å¤´
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">HttpResponse</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">render</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">JsonResponse</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># è®¾ç½®å“åº”å†…å®¹</span>
</span></span><span class="line"><span class="cl">    <span class="n">res</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&#34;login&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># è®¾ç½®å“åº”å¤´</span>
</span></span><span class="line"><span class="cl">    <span class="n">res</span><span class="p">[</span><span class="s1">&#39;xx1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&#34;hahaha&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">res</span><span class="p">[</span><span class="s1">&#39;xx2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&#34;hahaha&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">res</span><span class="p">[</span><span class="s1">&#39;xx3&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&#34;hahaha&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># è®¾ç½®cookie</span>
</span></span><span class="line"><span class="cl">    <span class="n">res</span><span class="o">.</span><span class="n">set_cookie</span><span class="p">(</span><span class="s1">&#39;k1&#39;</span><span class="p">,</span><span class="s2">&#34;aaaaaaaa&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">res</span><span class="o">.</span><span class="n">set_cookie</span><span class="p">(</span><span class="s1">&#39;k2&#39;</span><span class="p">,</span><span class="s2">&#34;bbbbbb&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">res</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="fbvå’Œcbv">FBVå’ŒCBV
</h3><p><img src="/post/python/Django/1732104063621-29bab11d-9779-48b7-bd77-8643fc50c51a.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>æºç åˆ†æ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># è‡ªå®šä¹‰çš„UsersViewç±»æ²¡æœ‰as_view()æ–¹æ³•ï¼Œäºæ˜¯æ‰¾å…¶çˆ¶ç±»Viewçš„as_view()æ–¹æ³•</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">as_view</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">initkwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;Main entry point for a request-response process.&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">initkwargs</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="o">...</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># self=UsersView()</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">initkwargs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;request&#39;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="o">...</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">view</span>
</span></span><span class="line"><span class="cl"> <span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">http_method_names</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># handerä¸ºUsersViewå¯¹è±¡çš„getæ–¹æ³•æˆ–postæ–¹æ³•</span>
</span></span><span class="line"><span class="cl">            <span class="n">handler</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">http_method_not_allowed</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">http_method_not_allowed</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># hander() è°ƒç”¨</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">handler</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># æœ¬è´¨è¿˜æ˜¯ä¸€ä¸ªå‡½æ•°</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="é™æ€èµ„æº">é™æ€èµ„æº
</h2><ul>
<li>å¼€å‘éœ€è¦ï¼šcssï¼Œjsï¼Œå›¾ç‰‡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">-</span> <span class="n">æ ¹ç›®å½•çš„</span> <span class="o">/</span><span class="n">static</span><span class="o">/</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">å·²ç»appç›®å½•ä¸‹è½½</span> <span class="o">/</span><span class="n">static</span><span class="o">/</span> <span class="n">æ–‡ä»¶å¤¹ä¸‹</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>åª’ä½“æ–‡ä»¶ï¼šç”¨æˆ·ä¸Šä¼ çš„æ•°æ®</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">-</span> <span class="n">æ ¹ç›®å½•çš„</span> <span class="o">/</span><span class="n">media</span><span class="o">/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="é™æ€æ–‡ä»¶">é™æ€æ–‡ä»¶
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># å·²æ³¨å†Œçš„appçš„staticç›®å½•</span>
</span></span><span class="line"><span class="cl"><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.admin&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.auth&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.contenttypes&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.sessions&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.messages&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.contrib.staticfiles&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;apps.api.apps.ApiConfig&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;apps.web.apps.WebConfig&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="c1"># æ ¹ç›®å½•ä¸‹çš„staticç›®å½•</span>
</span></span><span class="line"><span class="cl"><span class="n">STATIC_URL</span> <span class="o">=</span> <span class="s1">&#39;/static/&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">STATICFILES_DIRS</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s1">&#39;static&#39;</span><span class="p">),</span> <span class="c1"># é¡¹ç›®çº§åˆ«çš„é™æ€æ–‡ä»¶ç›®å½•</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é¡ºåºï¼šä¼˜å…ˆæŸ¥æ‰¾æ ¹ç›®å½•ä¸‹çš„staticç›®å½•ï¼Œè‹¥æ‰¾ä¸åˆ°å†æŒ‰æ³¨å†Œé¡ºåºå»å·²æ³¨å†Œçš„appä¸‹çš„staticç›®å½•</p>
<p>å¦‚ä½•å¯¼å…¥ï¼Ÿ</p>
<p>å¯¼å…¥æ¨¡å—ï¼Œè°ƒç”¨é‡Œé¢çš„å‡½æ•°å¸®æˆ‘å»settingæ–‡ä»¶ä¸­è¯»å–STATIC_URL</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="p">{</span><span class="o">%</span> <span class="n">load</span> <span class="n">static</span> <span class="o">%</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="err">!</span><span class="n">DOCTYPE</span> <span class="n">html</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">html</span> <span class="n">lang</span><span class="o">=</span><span class="s2">&#34;en&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">charset</span><span class="o">=</span><span class="s2">&#34;UTF-8&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="n">Title</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">ç™»å½•é¡µé¢</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&#34;/xxx/xxxxx/&#34;</span><span class="o">&gt;</span><span class="n">è°ƒæ¢dao</span> <span class="n">xx</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&#34;{</span><span class="si">% u</span><span class="s2">rl &#39;login&#39; %}&#34;</span><span class="o">&gt;</span><span class="n">è·³è½¬</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&#34;{</span><span class="si">% s</span><span class="s2">tatic &#39;api/1.png&#39; %}&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç”Ÿäº§ç¯å¢ƒ</p>
<ul>
<li>æ”¶é›†é™æ€æ–‡ä»¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># å°†æ‰€æœ‰çš„é™æ€æ–‡ä»¶æ”¶é›†åˆ°ä¸€ä¸ªä½ç½®ï¼Œä»¥ä¾¿WebæœåŠ¡å™¨å¯ä»¥é«˜æ•ˆåœ°æä¾›è¿™äº›æ–‡ä»¶</span>
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">collectstatic</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>é…ç½®WebæœåŠ¡å™¨</li>
</ul>
<p><font style="color:rgb(6, 6, 7);">åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½ éœ€è¦é…ç½®WebæœåŠ¡å™¨ï¼ˆå¦‚Nginxæˆ–Apacheï¼‰æ¥æä¾›é™æ€æ–‡ä»¶ã€‚ä½ éœ€è¦æŒ‡å®šé™æ€æ–‡ä»¶çš„ç›®å½•ï¼ˆé€šå¸¸æ˜¯ </font><code>&lt;font style=&quot;color:rgb(6, 6, 7);&quot;&gt;STATIC_ROOT&lt;/font&gt;</code><font style="color:rgb(6, 6, 7);">ï¼‰</font></p>
<h3 id="åª’ä½“æ–‡ä»¶">åª’ä½“æ–‡ä»¶
</h3><p><font style="color:rgb(6, 6, 7);">åœ¨ä½ çš„ </font><code>settings.py</code><font style="color:rgb(6, 6, 7);"> æ–‡ä»¶ä¸­ï¼Œä½ éœ€è¦å®šä¹‰ä¸¤ä¸ªè®¾ç½®é¡¹ï¼š</font></p>
<ul>
<li><code>MEDIA_URL</code><font style="color:rgb(6, 6, 7);">ï¼šåª’ä½“æ–‡ä»¶çš„URLå‰ç¼€ã€‚</font></li>
<li><code>MEDIA_ROOT</code><font style="color:rgb(6, 6, 7);">ï¼šæœåŠ¡å™¨ä¸Šå­˜å‚¨ä¸Šä¼ æ–‡ä»¶çš„è·¯å¾„ã€‚</font></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># settings.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ä¸Šä¼ çš„æ–‡ä»¶å¯ä»¥é€šè¿‡ç±»ä¼¼ http://yourdomain.com/media/yourfile.jpg çš„URLæ¥è®¿é—®ã€‚</span>
</span></span><span class="line"><span class="cl"><span class="n">MEDIA_URL</span> <span class="o">=</span> <span class="s1">&#39;/media/&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># BASE_DIR æ˜¯ä½ çš„Djangoé¡¹ç›®çš„æ ¹ç›®å½•ï¼Œmedia æ˜¯åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ä¸€ä¸ªå­ç›®å½•ï¼Œç”¨äºå­˜å‚¨ä¸Šä¼ çš„æ–‡ä»¶</span>
</span></span><span class="line"><span class="cl"><span class="n">MEDIA_ROOT</span> <span class="o">=</span> <span class="n">BASE_DIR</span> <span class="o">/</span> <span class="s1">&#39;media&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><font style="color:rgb(6, 6, 7);">åœ¨ </font><code>&lt;font style=&quot;color:rgb(6, 6, 7);&quot;&gt;urls.py&lt;/font&gt;</code><font style="color:rgb(6, 6, 7);"> ä¸­æ·»åŠ ä»¥ä¸‹URLæ¨¡å¼ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸­è¿è¡ŒæœåŠ¡å™¨æ—¶ï¼ŒDjangoå°†èƒ½å¤Ÿé€šè¿‡ </font><code>&lt;font style=&quot;color:rgb(6, 6, 7);&quot;&gt;/media/&lt;/font&gt;</code><font style="color:rgb(6, 6, 7);"> URLå‰ç¼€æä¾›ä¸Šä¼ çš„æ–‡ä»¶</font></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># urls.py</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.conf.urls.static</span> <span class="kn">import</span> <span class="n">static</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ... ä½ çš„å…¶ä»–urlé…ç½®</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">urlpatterns</span> <span class="o">+=</span> <span class="n">static</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_URL</span><span class="p">,</span> <span class="n">document_root</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_ROOT</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="æ¨¡æ¿">æ¨¡æ¿
</h2><h3 id="htmlæ¨¡æ¿çš„å¯»æ‰¾é¡ºåº">htmlæ¨¡æ¿çš„å¯»æ‰¾é¡ºåº
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">TEMPLATES</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.template.backends.django.DjangoTemplates&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;DIRS&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s1">&#39;templates&#39;</span><span class="p">)],</span> 
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;APP_DIRS&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;context_processors&#39;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;django.template.context_processors.debug&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;django.template.context_processors.request&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># &#39;django.contrib.auth.context_processors.auth&#39;,</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># &#39;django.contrib.messages.context_processors.messages&#39;,</span>
</span></span><span class="line"><span class="cl">            <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å‚æ•°ä»‹ç»</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>BACKEND</th>
          <th><font style="color:rgb(6, 6, 7);">æŒ‡å®šæ¨¡æ¿å¼•æ“çš„åç«¯</font></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>DIRS</td>
          <td><font style="color:rgb(6, 6, 7);">ä¸€ä¸ªåŒ…å«é¢å¤–æ¨¡æ¿ç›®å½•è·¯å¾„çš„åˆ—è¡¨,é€šå¸¸ï¼Œè¿™é‡Œç”¨äºå­˜æ”¾å…¨å±€æ¨¡æ¿</font></td>
      </tr>
      <tr>
          <td>APP_DIRS</td>
          <td><font style="color:rgb(6, 6, 7);">å¦‚æœè®¾ç½®ä¸º</font><code>&lt;font style=&quot;color:rgb(6, 6, 7);&quot;&gt;True&lt;/font&gt;</code><font style="color:rgb(6, 6, 7);">ï¼Œåˆ™Djangoä¼šåœ¨æ¯ä¸ªå®‰è£…çš„åº”ç”¨çš„</font><code>&lt;font style=&quot;color:rgb(6, 6, 7);&quot;&gt;templates&lt;/font&gt;</code><font style="color:rgb(6, 6, 7);">ç›®å½•ä¸‹å¯»æ‰¾æ¨¡æ¿</font></td>
      </tr>
      <tr>
          <td>OPTIONS</td>
          <td><font style="color:rgb(6, 6, 7);">ä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«æ¨¡æ¿å¼•æ“çš„é€‰é¡¹</font></td>
      </tr>
  </tbody>
</table></div>
<p>å¯»æ‰¾é¡ºåº</p>
<ul>
<li>å¦‚æœé…ç½®äº†DIRSç›®å½•ï¼Œåˆ™Djangoä¼šç°åœ¨è¿™äº›ç›®å½•ä¸­å¯»æ‰¾</li>
<li>åœ¨DIRSä¸­æ‰¾ä¸åˆ°ï¼Œä¼šç»§ç»­åœ¨æ¯ä¸ªappçš„templatesç›®å½•ä¸­æœç´¢ï¼Œä¸”é¡ºåºæŒ‰ç…§INSTALLED_APPçš„æ³¨å†Œé¡ºåºè¿›è¡Œ</li>
</ul>
<p>å¦‚ä½•é€‰æ‹©ï¼Ÿ</p>
<ul>
<li>ç®€å•çš„é¡¹ç›®ï¼Œæ¨¡æ¿éƒ½æ”¾åœ¨æ ¹ç›®å½•</li>
<li>å¤æ‚çš„é¡¹ç›®ï¼Œæ¨¡æ¿æ”¾åœ¨å„è‡ªçš„appä¸­ï¼Œå…¬å…±éƒ¨åˆ†æ”¾åœ¨templatesç›®å½•</li>
</ul>
<p>æ‹“å±•ï¼šä¿®æ”¹å†…ç½®appçš„æ¨¡æ¿</p>
<blockquote>
<p>åœ¨æ ¹ç›®å½•çš„templatesç›®å½•ä¸‹åˆ›å»ºåŒåæ–‡ä»¶å¤¹åŒåhtmlæ–‡ä»¶ï¼Œå³å¯è¦†ç›–å†…ç½®appæä¾›çš„æ¨¡æ¿ï¼Œå› ä¸ºæœ‰ä¼˜å…ˆæŸ¥æ‰¾DIRSç›®å½•</p></blockquote>
<h3 id="æ¨¡æ¿å¤„ç†çš„æœ¬è´¨">æ¨¡æ¿å¤„ç†çš„æœ¬è´¨
</h3><p>æ¸²æŸ“å®Œæˆåï¼Œç”Ÿæˆäº†å­—ç¬¦ä¸²ï¼Œå†è¿”å›ç»™æµè§ˆå™¨</p>
<blockquote>
<p>æ–‡ä»¶å‘½åä¸º.htmlåªæ˜¯ä¸ºäº†ç¼–å†™htmlæ–¹ä¾¿ï¼Œå®é™…ä¸Šä»€ä¹ˆåç¼€éƒ½å¯ä»¥</p></blockquote>
<p>æ¨¡æ¿å¤„ç†æµç¨‹</p>
<ul>
<li>è§†å›¾å‡½æ•°è·å–æ•°æ®ï¼Œåˆ›å»ºä¸Šä¸‹æ–‡å­—å…¸å¹¶ä¼ é€’ç»™æ¨¡æ¿</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">MyModel</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">home</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">data</span> <span class="o">=</span> <span class="n">MyModel</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>  <span class="c1"># ä»æ•°æ®åº“è·å–æ•°æ®</span>
</span></span><span class="line"><span class="cl">    <span class="n">context</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">data</span><span class="p">}</span>  <span class="c1"># åˆ›å»ºä¸Šä¸‹æ–‡</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;myapp/home.html&#39;</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>  <span class="c1"># æ¸²æŸ“æ¨¡æ¿</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æ¸²æŸ“æ¨¡æ¿ render(ï¼‰å‡½æ•°
<ul>
<li>æ ¹æ®æ¨¡æ¿åç§°æŸ¥æ‰¾æ¨¡æ¿</li>
<li>åŠ è½½æ¨¡æ¿ï¼Œå‡†å¤‡æ¸²æŸ“</li>
</ul>
</li>
<li>å¤„ç†ä¸Šä¸‹æ–‡
<ul>
<li>å°†ä¸Šä¸‹æ–‡å­—å…¸æ’å…¥æ¨¡æ¿ã€‚æ¨¡æ¿ä¸­çš„å ä½ç¬¦ï¼ˆå˜é‡å’Œæ ‡ç­¾ï¼‰ä¼šè¢«å®é™…æ•°æ®æ›¿ä»£</li>
<li>å¤„ç†æ¨¡æ¿ä¸­çš„æ¨¡æ¿æ ‡ç­¾å’Œè¿‡æ»¤å™¨ï¼Œä¾‹å¦‚ï¼šå¾ªç¯éå†æ•°æ®ã€æ¡ä»¶åˆ¤æ–­ç­‰</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">My</span> <span class="n">Data</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">ul</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data</span> <span class="o">%</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="p">{{</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ç”Ÿæˆæœ€ç»ˆè¾“å‡ºï¼Œè¿”å›å“åº”</li>
</ul>
<p><img src="/post/python/Django/1732153383490-62011243-3759-49fc-b4ce-7a2542acc514.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>å¼¹çª—å†…å®¹ä¸º{{ n2 }}ï¼Œå› ä¸ºåœ¨jsæ–‡ä»¶æ˜¯åœ¨æµè§ˆå™¨ç«¯å‘èµ·çš„è¯·æ±‚ï¼Œæ­¤æ—¶æ¨¡æ¿æ¸²æŸ“æ—©å·²å®Œæˆ</p>
<h3 id="å¸¸ç”¨è¯­æ³•">å¸¸ç”¨è¯­æ³•
</h3><p>å˜é‡ä¼ é€’</p>
<blockquote>
<p>è°ƒç”¨æ–¹æ³•ä¸ç”¨åŠ ï¼ˆï¼‰</p></blockquote>
<p><img src="/post/python/Django/1732154380277-df3b82d6-2172-4972-a56c-cc37bbb63e96.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>å†…ç½®å‡½æ•°</p>
<p><img src="/post/python/Django/1732154498692-89b2f800-e9b8-48f2-b443-2815d348f102.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>æ ‡ç­¾</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># if</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">condition</span> <span class="o">%</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">code</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># for</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span> <span class="o">%</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">!</span><span class="o">--</span> <span class="n">code</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># url</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="o">%</span> <span class="n">url</span> <span class="s1">&#39;name&#39;</span> <span class="n">arg</span> <span class="o">%</span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¨¡æ¿ç»§æ‰¿</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s2">&#34;base.html&#34;</span> <span class="o">%</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">title</span> <span class="o">%</span><span class="p">}{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">content</span> <span class="o">%</span><span class="p">}{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è‡ªå®šä¹‰æ¨¡æ¿æ ‡ç­¾</p>
<ul>
<li>filter</li>
</ul>
<blockquote>
<p>ç”¨äºä¿®æ”¹å˜é‡å€¼ï¼Œ<font style="color:rgb(6, 6, 7);">é€šå¸¸åœ¨æ¨¡æ¿å˜é‡åé¢ä½¿ç”¨ï¼Œç”¨ç®¡é“ç¬¦å·</font><code>&lt;font style=&quot;color:rgb(6, 6, 7);&quot;&gt;|&lt;/font&gt;</code><font style="color:rgb(6, 6, 7);">åˆ†éš”</font></p></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">-</span> <span class="n">æ•°æ®å¤„ç†</span><span class="err">ï¼Œ</span><span class="n">å‚æ•°</span><span class="err">ï¼š</span><span class="mi">1</span><span class="o">-</span><span class="mi">2</span><span class="n">ä¸ª</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">æ•°æ®å¤„ç†</span><span class="err">ï¼Œ</span><span class="n">ifæ¡ä»¶</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># åœ¨templatetags/custom_filters.pyä¸­</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">template</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">register</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">Library</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@register.filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;lowercase&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">lowercase</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¨¡æ¿ä¸­</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">{{ my_variable|lowercase }}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>simple_tag</li>
</ul>
<blockquote>
<p><font style="color:rgb(6, 6, 7);">ä¸€ä¸ªè‡ªå®šä¹‰çš„æ¨¡æ¿æ ‡ç­¾ï¼Œå®ƒä¸æ¥å—ä»»ä½•æ¨¡æ¿å˜é‡ï¼Œåªæ¥æ”¶ä½ç½®å‚æ•°å’Œå…³é”®å­—å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ç»“æœ</font></p></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">å‚æ•°æ— é™åˆ¶</span> <span class="o">&amp;</span> <span class="n">è¿”å›æ–‡æœ¬</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># åœ¨templatetags/custom_tags.pyä¸­</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">template</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">register</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">Library</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@register.simple_tag</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">my_simple_tag</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="sa">f</span><span class="s2">&#34;&lt;p&gt;</span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s2">&lt;/p&gt;&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¨¡æ¿ä¸­</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">{% my_simple_tag &#34;Hello, World!&#34; %}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>inclusion_tag</li>
</ul>
<blockquote>
<p><font style="color:rgb(6, 6, 7);">ç±»ä¼¼äºsimple_tagï¼Œä½†å®ƒè¿”å›çš„æ˜¯æ¸²æŸ“åçš„æ¨¡æ¿ç‰‡æ®µï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²ã€‚è¿™å…è®¸ä½ å°†æ¨¡æ¿çš„æŸä¸ªéƒ¨åˆ†æŠ½è±¡æˆä¸€ä¸ªç‹¬ç«‹çš„æ¨¡æ¿æ–‡ä»¶ï¼Œå¹¶åœ¨éœ€è¦æ—¶åŒ…å«è¿›æ¥</font></p></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">å‚æ•°æ— é™åˆ¶</span><span class="err">ï¼Œ</span><span class="n">è¿”å›htmlç‰‡æ®µ</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># åœ¨templatetags/custom_tags.pyä¸­</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">template</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">register</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">Library</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@register.inclusion_tag</span><span class="p">(</span><span class="s1">&#39;custom_template.html&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">my_inclusion_tag</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">data</span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>custom_template.htmlæ–‡ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{{ data }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¨¡æ¿ä¸­</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="p">{</span><span class="o">%</span> <span class="n">my_inclusion_tag</span> <span class="s2">&#34;Some data&#34;</span> <span class="o">%</span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç»§æ‰¿ä¸æ¯ç‰ˆ">ç»§æ‰¿ä¸æ¯ç‰ˆ
</h3><h4 id="åŸºç¡€æ¨¡æ¿æ¯ç‰ˆ">åŸºç¡€æ¨¡æ¿ï¼ˆæ¯ç‰ˆï¼‰
</h4><p>é€šå¸¸åŒ…å«ä»¥ä¸‹å†…å®¹</p>
<ul>
<li>é€šç”¨çš„HTMLç»“æ„</li>
<li>å ä½ç¬¦ï¼ˆblock)ï¼Œç”¨äºå­—å¹•ç‰ˆè¦†ç›–æˆ–æ‰©å±•å†…å®¹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>{% block title %}My Site{% endblock %}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">header</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!-- é€šç”¨å¤´éƒ¨å†…å®¹ --&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    {% block content %}
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!-- é»˜è®¤å†…å®¹ï¼Œå­æ¨¡æ¿å¯ä»¥è¦†ç›–æˆ–æ‰©å±• --&gt;</span>
</span></span><span class="line"><span class="cl">    {% endblock %}
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">footer</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!-- é€šç”¨åº•éƒ¨å†…å®¹ --&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">footer</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å­æ¨¡æ¿">å­æ¨¡æ¿
</h4><p><font style="color:rgb(6, 6, 7);">å­æ¨¡æ¿ç»§æ‰¿åŸºç¡€æ¨¡æ¿ï¼Œå¹¶å¯ä»¥è¦†ç›–æˆ–æ‰©å±•å…¶ä¸­çš„å†…å®¹</font></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">{% extends &#34;base.html&#34; %}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">{% block title %}Home Page{% endblock %}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">{% block content %}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Welcome to the Home Page<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is the home page content.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{% endblock %}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¯ç‰ˆä¸€èˆ¬æ”¾åœ¨æ ¹ç›®å½•ä¸‹çš„templatesç›®å½•ï¼Œè‹¥è¦è§†appä¸ºç»„ä»¶ï¼Œå¯åœ¨appä¸‹çš„templatesä¹Ÿæ”¾ä¸€ä»½</p>
<h4 id="æ¨¡æ¿çš„å¯¼å…¥">æ¨¡æ¿çš„å¯¼å…¥
</h4><p><img src="/post/python/Django/1732156134550-7ae71e20-74ab-4cf3-bfbf-b308bdc597bc.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>å…ˆç»§æ‰¿æ¨¡æ¿ï¼Œå†å¯¼å…¥åµŒå¥—æ¨¡æ¿ï¼Œæœ€åå†è¿›è¡Œæ¸²æŸ“</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">{% include &#34;template_name.html&#34; %}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ä¸­é—´ä»¶">ä¸­é—´ä»¶
</h2><p>Djangoç”Ÿå‘½å‘¨æœŸ</p>
<p><img src="/post/python/Django/1732156310706-5f8a5e35-07be-4e03-9b5c-f8cc8a437e41.png"
	
	
	
	loading="lazy"
	
	
></p>
<ul>
<li>ç±»</li>
<li>å®šä¹‰æ–¹æ³•</li>
<li>æ³¨å†Œ</li>
</ul>
<h3 id="ç®€å•å®ä¾‹åŸå§‹">ç®€å•å®ä¾‹ï¼ˆåŸå§‹ï¼‰
</h3><p><img src="/post/python/Django/1732156549515-a6a6761d-fe06-4d55-a6bb-bed26c8f59fa.png"
	
	
	
	loading="lazy"
	
	
></p>
<p><img src="/post/python/Django/1732156555542-dee6a05a-5ace-48ed-a4c3-83c7c5aa76c3.png"
	
	
	
	loading="lazy"
	
	
></p>
<h3 id="middlewaremixinæ¨è">MiddlewareMixinï¼ˆæ¨èï¼‰
</h3><h4 id="é£Ÿç”¨æ–¹æ³•">é£Ÿç”¨æ–¹æ³•
</h4><p>è‡ªå®šä¹‰process_requestå’Œprocess_responseæ–¹æ³•ï¼Œå…¶ä»–ç»§æ‰¿MiddlewareMixinå³å¯</p>
<p><img src="/post/python/Django/1732156660779-a5e2accc-5f34-4743-b16e-1de4162bbcd8.png"
	
	
	
	loading="lazy"
	
	
></p>
<p><img src="/post/python/Django/1732156674883-057ef91a-1730-41ff-9973-04353a8d72b1.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>æºç </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">MiddlewareMixin</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">get_response</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">		<span class="bp">self</span><span class="o">.</span><span class="n">get_response</span> <span class="o">=</span> <span class="n">get_response</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">		<span class="n">response</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;process_request&#39;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="n">response</span> <span class="o">=</span> <span class="n">response</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_response</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;process_response&#39;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">			<span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="n">response</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">MyMd</span><span class="p">(</span><span class="n">MiddlewareMixin</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">request</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">		<span class="o">...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">def</span> <span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">		<span class="o">...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">djangoå†…éƒ¨é»˜è®¤æ‰§è¡Œcallæ–¹æ³•</span><span class="err">ï¼Œ</span><span class="n">ä¼ å…¥å‚æ•°</span><span class="err">ã€‚</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="æ‰§è¡Œæµç¨‹">æ‰§è¡Œæµç¨‹
</h4><p><img src="/post/python/Django/1732156863476-dd0017c5-a2b6-42b0-97b3-ef8bbf4c0bee.png"
	
	
	
	loading="lazy"
	
	
></p>
<p><img src="/post/python/Django/1732156875903-033f2390-2324-440e-b3a1-119536220a07.png"
	
	
	
	loading="lazy"
	
	
></p>
<blockquote>
<p>process_requestéƒ½æ²¡æœ‰è¿”å›å€¼ï¼Œå¦‚æœæœ‰è¿”å›å€¼åˆ™ç›´æ¥æ‰§è¡Œå…¶process_responseï¼Œä¸å†æ‰§è¡Œåç»­ä¸­é—´ä»¶åŠè§†å›¾å‡½æ•°</p>
<p>ç”¨äºæƒé™åˆ¤æ–­ï¼Œipé»‘åå•æ‹¦æˆª</p>
<p>process_responseéƒ½æœ‰è¿”å›å€¼ï¼Œç”¨äºç»™responseæ·»åŠ ä¿¡æ¯</p></blockquote>
<p><img src="/post/python/Django/1732156982789-92493c72-3b89-47e8-b900-5abb53163ef2.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>ä¸­é—´ä»¶é—´çš„æ‰§è¡Œé¡ºåºæŒ‰ç…§æ³¨å†Œé¡ºåº</p>
<p>æ€»ç»“ï¼š</p>
<p>å…ˆæŒ‰é¡ºåºä¾æ¬¡æ‰§è¡Œå„ä¸ªä¸­é—´ä»¶çš„process_requestï¼Œå†è¿›è¡Œè·¯ç”±åŒ¹é…ï¼Œåœ¨è¿”å›å»æ‰§è¡Œprocess_viewæ–¹æ³•æ‰è¿›å…¥è§†å›¾å‡½æ•°ï¼Œè‹¥æŸä¸€process_viewæœ‰è¿”å›å€¼ï¼Œåˆ™ç›´æ¥è·³èµ°ï¼Œå®Œæ•´æ‰§è¡Œprocess_reponse</p>
<blockquote>
<p>process_viewæ˜¯åœ¨djangoä¸­å†™æ­»äº†çš„</p></blockquote>
<p><img src="/post/python/Django/1732157126083-056bdf52-84e4-43c5-a1ef-de12c1307d1c.png"
	
	
	
	loading="lazy"
	
	
></p>
<h4 id="å…¶ä»–">å…¶ä»–
</h4><h5 id="process_exception">process_exception
</h5><blockquote>
<p><font style="color:rgb(6, 6, 7);">å½“è§†å›¾æŠ›å‡ºå¼‚å¸¸æ—¶ï¼ŒDjangoä¼šå¯»æ‰¾ä¸€ä¸ªåˆé€‚çš„å“åº”</font></p>
<p><font style="color:rgb(6, 6, 7);">Djan</font>goä¼šä»åå‘å‰éå†ä¸­<font style="color:rgb(6, 6, 7);">é—´ä»¶æ ˆï¼Œè°ƒç”¨æ¯ä¸ªä¸­é—´ä»¶çš„</font><code>&lt;font style=&quot;color:rgb(6, 6, 7);&quot;&gt;process_exception&lt;/font&gt;</code><font style="color:rgb(6, 6, 7);">æ–¹æ³•ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªè¿”å›äº†å“åº”å¯¹è±¡ï¼ˆ</font><code>&lt;font style=&quot;color:rgb(6, 6, 7);&quot;&gt;HttpResponse&lt;/font&gt;</code><font style="color:rgb(6, 6, 7);">æˆ–å…¶å­ç±»å®ä¾‹ï¼‰çš„æ–¹æ³•ï¼Œå¦‚æœåˆ°è¾¾ä¸­é—´ä»¶æ ˆçš„å¼€å§‹éƒ½æ²¡æœ‰æ‰¾åˆ°è¿”å›å“åº”çš„æ–¹æ³•ï¼ŒDjangoå°†æ˜¾ç¤ºé»˜è®¤çš„500é”™è¯¯é¡µé¢ï¼ˆæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼‰</font></p>
<p><font style="color:rgb(6, 6, 7);">è¿™ä¸ªæ–¹æ³•å…è®¸å¼€å‘è€…åœ¨å¼‚å¸¸å‘ç”Ÿæ—¶æ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªè‡ªå®šä¹‰çš„å“åº”ç»™å®¢æˆ·ç«¯ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„é”™è¯¯é¡µé¢</font></p></blockquote>
<p><img src="/post/python/Django/1732157307696-c14048f3-9e5d-46f3-920e-936258e8efe0.png"
	
	
	
	loading="lazy"
	
	
></p>
<p><img src="/post/python/Django/1732157312628-1d652b10-e89d-47b3-9e86-33d5c9c83a3d.png"
	
	
	
	loading="lazy"
	
	
></p>
<h5 id="process_template_response">process_template_response
</h5><blockquote>
<p><font style="color:rgb(6, 6, 7);">åœ¨è§†å›¾è¢«å®Œå…¨æ‰§è¡Œåè°ƒç”¨ï¼Œå¦‚æœå“åº”å®ä¾‹æœ‰</font><code>&lt;font style=&quot;color:rgb(6, 6, 7);&quot;&gt;render()&lt;/font&gt;</code><font style="color:rgb(6, 6, 7);">æ–¹æ³•ï¼Œè¡¨æ˜å®ƒæ˜¯ä¸€ä¸ª</font><code>&lt;font style=&quot;color:rgb(6, 6, 7);&quot;&gt;TemplateResponse&lt;/font&gt;</code><font style="color:rgb(6, 6, 7);">æˆ–ç­‰æ•ˆå¯¹è±¡ã€‚è¿™ä¸ªæ–¹æ³•å…è®¸ä½ åœ¨æ¨¡æ¿æ¸²æŸ“ä¹‹åã€å“åº”å‘é€åˆ°å®¢æˆ·ç«¯ä¹‹å‰ï¼Œå¯¹</font><code>&lt;font style=&quot;color:rgb(6, 6, 7);&quot;&gt;TemplateResponse&lt;/font&gt;</code><font style="color:rgb(6, 6, 7);">å¯¹è±¡è¿›è¡Œå¤„ç†</font></p></blockquote>
<p><font style="color:rgb(6, 6, 7);">æ‰§è¡Œé¡ºåº</font></p>
<ul>
<li><code>process_template_response</code><font style="color:rgb(6, 6, 7);">æ–¹æ³•åœ¨è§†å›¾å‡½æ•°è¿”å›ä¸€ä¸ª</font><code>TemplateResponse</code><font style="color:rgb(6, 6, 7);">å¯¹è±¡åè¢«è°ƒç”¨ã€‚</font></li>
<li><font style="color:rgb(6, 6, 7);">å¦‚æœè§†å›¾è¿”å›çš„æ˜¯ä¸€ä¸ª</font><code>TemplateResponse</code><font style="color:rgb(6, 6, 7);">å¯¹è±¡ï¼ŒDjangoä¼šä»ä¸­é—´ä»¶æ ˆçš„æœ«å°¾å¼€å§‹è°ƒç”¨ä¸­é—´ä»¶çš„</font><code>process_template_response</code><font style="color:rgb(6, 6, 7);">æ–¹æ³•ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªè¿”å›äº†</font><code>TemplateResponse</code><font style="color:rgb(6, 6, 7);">å¯¹è±¡çš„æ–¹æ³•æˆ–è€…åˆ°è¾¾ä¸­é—´ä»¶æ ˆçš„å¼€å§‹ã€‚</font></li>
<li><font style="color:rgb(6, 6, 7);">ä¸­é—´ä»¶åœ¨å“åº”é˜¶æ®µä¼šæŒ‰ç…§ç›¸åçš„é¡ºåºè¿è¡Œï¼Œå…¶ä¸­åŒ…æ‹¬</font><code>process_template_response</code><font style="color:rgb(6, 6, 7);">ã€‚</font></li>
</ul>
<p><font style="color:rgb(6, 6, 7);"></font></p>
<h4 id="æ€»ç»“"><font style="color:rgb(6, 6, 7);">æ€»ç»“</font>
</h4><ul>
<li><font style="color:rgb(6, 6, 7);">å®šä¹‰ä¸­é—´ç±»</font></li>
<li><font style="color:rgb(6, 6, 7);">ç±»æ–¹æ³•</font>
<ul>
<li><font style="color:rgb(6, 6, 7);">process_request</font></li>
<li><font style="color:rgb(6, 6, 7);">process_view</font></li>
<li><font style="color:rgb(6, 6, 7);">process_reponse</font></li>
<li><font style="color:rgb(6, 6, 7);">process_exceptionï¼Œè§†å›¾å‡½æ•°å‡ºç°å¼‚å¸¸ï¼Œè‡ªå®šä¹‰å¼‚å¸¸é¡µé¢ã€‚</font></li>
<li><font style="color:rgb(6, 6, 7);">process_template_responseï¼Œè§†å›¾å‡½æ•°è¿”å›TemplateResponseå¯¹è±¡  or  å¯¹è±¡ä¸­å«æœ‰.renderæ–¹æ³•ã€‚</font></li>
</ul>
</li>
</ul>
<p><font style="color:rgb(6, 6, 7);"></font></p>
<h2 id="ormæ“ä½œ"><font style="color:rgb(6, 6, 7);">ORMæ“ä½œ</font>
</h2><p><font style="color:rgb(6, 6, 7);">ORMï¼ˆObject-Relational Mappingï¼Œå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰æ˜¯Djangoæ¡†æ¶çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œå®ƒå…è®¸å¼€å‘è€…ä½¿ç”¨Pythonä»£ç æ¥æ“ä½œæ•°æ®åº“ï¼Œè€Œæ— éœ€ç¼–å†™SQLè¯­å¥ã€‚ORMæŠ½è±¡äº†æ•°æ®åº“çš„æ“ä½œï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥åƒæ“ä½œæ™®é€šPythonå¯¹è±¡ä¸€æ ·æ“ä½œæ•°æ®åº“</font></p>
<p><strong><font style="color:rgb(6, 6, 7);">æœ¬è´¨å°±æ˜¯ç¿»è¯‘çš„</font></strong></p>
<p><img src="/post/python/Django/1732162192972-fdc2e43c-6249-4700-87ce-05447e6c372a.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>ç‰¹ç‚¹ï¼šå¼€å‘æ•ˆç‡é«˜ï¼Œæ‰§è¡Œæ•ˆç‡ä½</p>
<h3 id="ormåŸºæœ¬æ“ä½œæ­¥éª¤">ORMåŸºæœ¬æ“ä½œæ­¥éª¤
</h3><ul>
<li>settings.pyï¼Œè¿æ¥æ•°æ®åº“</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.db.backends.sqlite3&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="n">BASE_DIR</span> <span class="o">/</span> <span class="s1">&#39;db.sqlite3&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>settings.pyï¼Œæ³¨å†Œapp</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">INSTALLED_APP</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">	<span class="o">...</span>
</span></span><span class="line"><span class="cl">	<span class="s2">&#34;app01.apps.App01Config&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ç¼–å†™modelsç±»</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">UserInfo</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="o">....</span>
</span></span><span class="line"><span class="cl">    <span class="o">.....</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æ‰§è¡Œå‘½ä»¤</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">makemigrations</span>    <span class="c1"># åˆ›å»ºè¿ç§»æ–‡ä»¶ï¼Œæ‰¾åˆ°æ‰€æœ‰å·²æ³¨å†Œçš„appä¸­çš„models.pyä¸­çš„ç±»è¯»å– -&gt; migrationsé…ç½®</span>
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span>           <span class="c1"># åº”ç”¨è¿ç§»åˆ°æ•°æ®åº“ï¼Œè¯»å–å·²æ³¨å†Œçš„appä¸‹çš„migrationsé…ç½® -&gt; SQLè¯­å¥  -&gt; åŒæ­¥æ•°æ®åº“</span>
</span></span><span class="line"><span class="cl"><span class="c1"># è‡ªå¸¦çš„appå·²é»˜è®¤ç”Ÿæˆmigrations</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è¿æ¥æ•°æ®åº“">è¿æ¥æ•°æ®åº“
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.db.backends.sqlite3&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="n">BASE_DIR</span> <span class="o">/</span> <span class="s1">&#39;db.sqlite3&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.db.backends.mysql&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;xxxxxxxx&#39;</span><span class="p">,</span>  <span class="c1"># æ•°æ®åº“åå­—</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;USER&#39;</span><span class="p">:</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;root123&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;HOST&#39;</span><span class="p">:</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>  <span class="c1"># ip</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;PORT&#39;</span><span class="p">:</span> <span class="mi">3306</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="é¡¹ç›®è¿æ¥mysql">é¡¹ç›®è¿æ¥MySQLï¼š
</h4><ul>
<li>å®‰è£…MySQLå¹¶å¯åŠ¨MySQLæœåŠ¡</li>
<li>æ‰‹åŠ¨åˆ›å»ºæ•°æ®åº“</li>
<li>é…ç½®djangoçš„settings.py</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.db.backends.mysql&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;xxxxxxxx&#39;</span><span class="p">,</span>  <span class="c1"># æ•°æ®åº“åå­—</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;USER&#39;</span><span class="p">:</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;root123&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;HOST&#39;</span><span class="p">:</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>  <span class="c1"># ip</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;PORT&#39;</span><span class="p">:</span> <span class="mi">3306</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å®‰è£…ç¬¬ä¸‰æ–¹ç»„ä»¶ é€‰å…¶ä¸€å³å¯
<ul>
<li>pymysql</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">pip</span> <span class="n">install</span> <span class="n">pymysql</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">é¡¹ç›®æ ¹ç›®å½•</span><span class="o">/</span><span class="n">é¡¹ç›®åç›®å½•</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
</span></span><span class="line"><span class="cl">	<span class="kn">import</span> <span class="nn">pymysql</span>
</span></span><span class="line"><span class="cl">	<span class="n">pymysql</span><span class="o">.</span><span class="n">install_as_MySQLdb</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>- mysqlclient
</code></pre>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">pip</span> <span class="n">install</span> <span class="n">mysqlclient</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å…¶ä»–æ•°æ®åº“">å…¶ä»–æ•°æ®åº“
</h4><h5 id="pgsql">pgsql
</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.db.backends.postgresql&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;mydatabase&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;USER&#39;</span><span class="p">:</span> <span class="s1">&#39;mydatabaseuser&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;mypassword&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;HOST&#39;</span><span class="p">:</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;PORT&#39;</span><span class="p">:</span> <span class="mi">5432</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># éœ€è¦ pip install psycopg2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.db.backends.oracle&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s2">&#34;xxxx&#34;</span><span class="p">,</span>  <span class="c1"># åº“å</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;USER&#34;</span><span class="p">:</span> <span class="s2">&#34;xxxxx&#34;</span><span class="p">,</span>  <span class="c1"># ç”¨æˆ·å</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;PASSWORD&#34;</span><span class="p">:</span> <span class="s2">&#34;xxxxx&#34;</span><span class="p">,</span>  <span class="c1"># å¯†ç </span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;HOST&#34;</span><span class="p">:</span> <span class="s2">&#34;127.0.0.1&#34;</span><span class="p">,</span>  <span class="c1"># ip</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;PORT&#34;</span><span class="p">:</span> <span class="mi">1521</span><span class="p">,</span>  <span class="c1"># ç«¯å£</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1"># éœ€è¦ pip install cx-Oracle</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è¿æ¥æ± ">è¿æ¥æ± 
</h3><p>djangoé»˜è®¤å†…ç½®æ²¡æœ‰è¿æ¥æ± </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">pymysql</span> <span class="o">-&gt;</span> <span class="n">æ“ä½œæ•°æ®åº“</span>
</span></span><span class="line"><span class="cl"><span class="n">DBUtils</span> <span class="o">-&gt;</span> <span class="n">è¿æ¥æ± </span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>django-db-connection-poolç»„ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">pip</span> <span class="n">install</span> <span class="n">django</span><span class="o">-</span><span class="n">db</span><span class="o">-</span><span class="n">connection</span><span class="o">-</span><span class="n">pool</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;default&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;dj_db_conn_pool.backends.mysql&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;day04&#39;</span><span class="p">,</span>  <span class="c1"># æ•°æ®åº“åå­—</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;USER&#39;</span><span class="p">:</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;root123&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;HOST&#39;</span><span class="p">:</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>  <span class="c1"># ip</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;PORT&#39;</span><span class="p">:</span> <span class="mi">3306</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;POOL_OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;POOL_SIZE&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  <span class="c1"># æœ€å°</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;MAX_OVERFLOW&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  <span class="c1"># åœ¨æœ€å°çš„åŸºç¡€ä¸Šï¼Œè¿˜å¯ä»¥å¢åŠ 10ä¸ªï¼Œå³ï¼šæœ€å¤§20ä¸ªã€‚</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;RECYCLE&#39;</span><span class="p">:</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span>  <span class="c1"># è¿æ¥å¯ä»¥è¢«é‡å¤ç”¨å¤šä¹…ï¼Œè¶…è¿‡ä¼šé‡æ–°åˆ›å»ºï¼Œ-1è¡¨ç¤ºæ°¸ä¹…ã€‚</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;TIMEOUT&#39;</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span> <span class="c1"># æ± ä¸­æ²¡æœ‰è¿æ¥æœ€å¤šç­‰å¾…çš„æ—¶é—´ã€‚</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å¤šæ•°æ®åº“">å¤šæ•°æ®åº“
</h3><p>djangoæ”¯æŒé¡¹ç›®è¿æ¥å¤šä¸ªæ•°æ®åº“</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;default&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;dj_db_conn_pool.backends.mysql&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;day05db&#39;</span><span class="p">,</span>  <span class="c1"># æ•°æ®åº“åå­—</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;USER&#39;</span><span class="p">:</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;root123&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;HOST&#39;</span><span class="p">:</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>  <span class="c1"># ip</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;PORT&#39;</span><span class="p">:</span> <span class="mi">3306</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;POOL_OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;POOL_SIZE&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  <span class="c1"># æœ€å°</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;MAX_OVERFLOW&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  <span class="c1"># åœ¨æœ€å°çš„åŸºç¡€ä¸Šï¼Œè¿˜å¯ä»¥å¢åŠ 10ä¸ªï¼Œå³ï¼šæœ€å¤§20ä¸ªã€‚</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;RECYCLE&#39;</span><span class="p">:</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span>  <span class="c1"># è¿æ¥å¯ä»¥è¢«é‡å¤ç”¨å¤šä¹…ï¼Œè¶…è¿‡ä¼šé‡æ–°åˆ›å»ºï¼Œ-1è¡¨ç¤ºæ°¸ä¹…ã€‚</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;TIMEOUT&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>  <span class="c1"># æ± ä¸­æ²¡æœ‰è¿æ¥æœ€å¤šç­‰å¾…çš„æ—¶é—´ã€‚</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;bak&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;dj_db_conn_pool.backends.mysql&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;day05bak&#39;</span><span class="p">,</span>  <span class="c1"># æ•°æ®åº“åå­—</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;USER&#39;</span><span class="p">:</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;root123&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;HOST&#39;</span><span class="p">:</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>  <span class="c1"># ip</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;PORT&#39;</span><span class="p">:</span> <span class="mi">3306</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;POOL_OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;POOL_SIZE&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  <span class="c1"># æœ€å°</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;MAX_OVERFLOW&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  <span class="c1"># åœ¨æœ€å°çš„åŸºç¡€ä¸Šï¼Œè¿˜å¯ä»¥å¢åŠ 10ä¸ªï¼Œå³ï¼šæœ€å¤§20ä¸ªã€‚</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;RECYCLE&#39;</span><span class="p">:</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span>  <span class="c1"># è¿æ¥å¯ä»¥è¢«é‡å¤ç”¨å¤šä¹…ï¼Œè¶…è¿‡ä¼šé‡æ–°åˆ›å»ºï¼Œ-1è¡¨ç¤ºæ°¸ä¹…ã€‚</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;TIMEOUT&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>  <span class="c1"># æ± ä¸­æ²¡æœ‰è¿æ¥æœ€å¤šç­‰å¾…çš„æ—¶é—´ã€‚</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="è¯»å†™åˆ†ç¦»">è¯»å†™åˆ†ç¦»
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="mf">192.168.1.2</span>       <span class="n">default</span> <span class="n">master</span>   <span class="p">[</span><span class="n">å†™</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                  <span class="n">ç»„ä»¶</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.2.12</span>      <span class="n">bak</span> <span class="n">slave</span>    <span class="p">[</span><span class="n">è¯»</span><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ç”Ÿæˆæ•°æ®åº“è¡¨</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">makemigrations</span>    <span class="c1"># æ‰¾åˆ°æ‰€æœ‰å·²æ³¨å†Œçš„appä¸­çš„models.pyä¸­çš„ç±»è¯»å– -&gt; migrationsé…ç½®</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span>
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span> <span class="o">--</span><span class="n">database</span><span class="o">=</span><span class="n">default</span>
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span> <span class="o">--</span><span class="n">database</span><span class="o">=</span><span class="n">bak</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>åç»­å†è¿›è¡Œå¼€å‘æ—¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">models</span><span class="o">.</span><span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">using</span><span class="p">(</span><span class="s2">&#34;default&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&#34;æ­¦æ²›é½&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">models</span><span class="o">.</span><span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">using</span><span class="p">(</span><span class="s2">&#34;bak&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ç¼–å†™routerç±»ï¼Œç®€åŒ–åç»­å¼€å‘æ—¶æ“ä½œ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DemoRouter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">db_for_read</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s2">&#34;bak&#34;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">db_for_write</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s2">&#34;default&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">router</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;DemoRouter&#34;</span><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">-</span> <span class="n">settingsæ–‡ä»¶é…ç½®</span> <span class="n">DATABASE_ROUTERS</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">ç¼–å†™settingsä¸­é…ç½®çš„æ–‡ä»¶å’Œç±»</span>
</span></span><span class="line"><span class="cl"><span class="n">è¿›è¡Œæ•°æ®åº“æ“ä½œæ—¶</span><span class="err">ï¼Œ</span><span class="n">ä¼šæ ¹æ®è¯»è¿˜æ˜¯å†™è¿›å…¥db_for_readæˆ–db_for_writeå‡½æ•°</span><span class="err">ï¼Œ</span><span class="n">ç„¶åæ ¹æ®å…¶è¿”å›çš„æ•°æ®åº“åå¯¹å…¶è¿›è¡Œæ“ä½œ</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/post/python/Django/1732325909611-81b8f2b8-b1d8-4f6f-93d1-55edf06e2e2c.png"
	
	
	
	loading="lazy"
	
	
></p>
<h4 id="åˆ†åº“å¤šapp---å¤šæ•°æ®åº“">åˆ†åº“ï¼ˆå¤šapp -&gt; å¤šæ•°æ®åº“ï¼‰
</h4><p>100å¼ è¡¨ï¼ŒAåº“å­˜æ”¾app01ç”Ÿæˆçš„50å¼ è¡¨ï¼ŒBåº“å­˜æ”¾app02ç”Ÿæˆçš„50å¼ è¡¨</p>
<ul>
<li>app01/models</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">UserInfo</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;æ ‡é¢˜&#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>app02/models</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Role</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;æ ‡é¢˜&#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å‘½ä»¤</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">makemigrations</span>
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span> <span class="n">app01</span> <span class="o">--</span><span class="n">database</span><span class="o">=</span><span class="n">default</span>
</span></span><span class="line"><span class="cl"><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span> <span class="n">app02</span> <span class="o">--</span><span class="n">database</span><span class="o">=</span><span class="n">bak</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/post/python/Django/1732326481315-96d08a97-ae7f-49ca-8895-832b28cde414.png"
	
	
	
	loading="lazy"
	
	
></p>
<ul>
<li>è¯»å†™æ“ä½œ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span><span class="p">,</span> <span class="n">HttpResponse</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">app01</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">m1</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">app02</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">m2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># app01ä¸­çš„æ“ä½œ -&gt; default</span>
</span></span><span class="line"><span class="cl">    <span class="n">v1</span> <span class="o">=</span> <span class="n">m1</span><span class="o">.</span><span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># app02ä¸­çš„æ“ä½œ -&gt; bak</span>
</span></span><span class="line"><span class="cl">    <span class="n">v2</span> <span class="o">=</span> <span class="n">m2</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">using</span><span class="p">(</span><span class="s1">&#39;bak&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">v2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&#34;è¿”å›&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>router</li>
</ul>
<p><img src="/post/python/Django/1732326552654-4d53afce-ca65-4eda-9bf8-0a7c80cf3798.png"
	
	
	
	loading="lazy"
	
	
></p>
<h4 id="åˆ†åº“å•app">åˆ†åº“ï¼ˆå•appï¼‰
</h4><p>100å¼ è¡¨ï¼Œ20å¼ è¡¨-Aæ•°æ®åº“ï¼›50å¼ è¡¨-Bæ•°æ®åº“</p>
<p><img src="/post/python/Django/1732326718970-ad2e5342-406c-48a9-b91f-44e58e3cc8e0.png"
	
	
	
	loading="lazy"
	
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span><span class="p">,</span> <span class="n">HttpResponse</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">app01</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">m1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># app01ä¸­çš„æ“ä½œ -&gt; default</span>
</span></span><span class="line"><span class="cl">    <span class="n">v1</span> <span class="o">=</span> <span class="n">m1</span><span class="o">.</span><span class="n">UserInfo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># app01ä¸­çš„æ“ä½œ -&gt; bak</span>
</span></span><span class="line"><span class="cl">    <span class="n">v2</span> <span class="o">=</span> <span class="n">m1</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">using</span><span class="p">(</span><span class="s1">&#39;bak&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">v2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&#34;è¿”å›&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/post/python/Django/1732327229566-09bc94b8-3a1d-4c39-8bc5-66660b0832ed.png"
	
	
	
	loading="lazy"
	
	
></p>
<h4 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹
</h4><ul>
<li>åˆ†åº“ï¼Œå°†è¡¨æ‹†åˆ†åˆ°ä¸åŒçš„æ•°æ®åº“</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">ä¸è¦åšè·¨æ•°æ®åº“å…³è”</span> <span class="o">-&gt;</span> <span class="n">djangoä¸æ”¯æŒ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">å°½å¯èƒ½å°†å…³è”çš„è¡¨æ”¾åˆ°ä¸€ä¸ªåº“ä¸­</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ä¸ºä»€ä¹ˆåˆ†åº“</li>
</ul>
<p>å‡è½»æ•°æ®åº“å‹åŠ›</p>
<h3 id="è¡¨å…³ç³»">è¡¨å…³ç³»
</h3><ul>
<li>å•è¡¨</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Role</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;æ ‡é¢˜&#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ä¸€å¯¹å¤š</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="n">db_table</span> <span class="o">=</span> <span class="s2">&#34;depart&#34;</span> <span class="c1"># è‡ªå®šä¹‰è¡¨åï¼Œé»˜è®¤æ˜¯appå_è¡¨å</span>
</span></span><span class="line"><span class="cl">	<span class="n">index_together</span><span class="o">=</span><span class="p">{}</span> <span class="c1"># è”åˆç´¢å¼•</span>
</span></span><span class="line"><span class="cl">    <span class="n">unique_together</span><span class="o">=</span><span class="p">((),)</span> <span class="c1"># è”åˆå”¯ä¸€ç´¢å¼•</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/post/python/Django/1732327662770-2fd0b964-e1aa-4fe9-b26c-035103380938.png"
	
	
	
	loading="lazy"
	
	
></p>
<ul>
<li>å¤šå¯¹å¤š</li>
</ul>
<p><img src="/post/python/Django/1732327680736-3c72a242-eeb6-4b65-9bf6-763542287727.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>å¦‚æœå…³ç³»åªæœ‰3åˆ—</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Boy</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    1   æ°æ£®æ–¯å¦æ£®
</span></span></span><span class="line"><span class="cl"><span class="s2">    2   æ±¤æ™®æ£®
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;æ ‡é¢˜&#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">b</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">to</span><span class="o">=</span><span class="s2">&#34;Girl&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Girl</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    1   alex
</span></span></span><span class="line"><span class="cl"><span class="s2">    2   è‹‘æ˜Š
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;æ ‡é¢˜&#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Boy</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    1   æ°æ£®æ–¯å¦æ£®
</span></span></span><span class="line"><span class="cl"><span class="s2">    2   æ±¤æ™®æ£®
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;æ ‡é¢˜&#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Girl</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    1   alex
</span></span></span><span class="line"><span class="cl"><span class="s2">    2   è‹‘æ˜Š
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;æ ‡é¢˜&#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">b</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">to</span><span class="o">=</span><span class="s2">&#34;Boy&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># åˆå­¦é˜¶æ®µå»ºè®®</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Boy</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;æ ‡é¢˜&#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Girl</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;æ ‡é¢˜&#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">B2G</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">bid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">to</span><span class="o">=</span><span class="s2">&#34;Boy&#34;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">gid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">to</span><span class="o">=</span><span class="s2">&#34;Girl&#34;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">address</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;åœ°ç‚¹&#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ä¸€å¯¹ä¸€</li>
</ul>
<p><img src="/post/python/Django/1732327864468-81318d94-11f6-4107-bda8-01b951a84d53.png"
	
	
	
	loading="lazy"
	
	
></p>
<h3 id="æ•°æ®æ“ä½œ">æ•°æ®æ“ä½œ
</h3><h4 id="å•è¡¨">å•è¡¨
</h4><ul>
<li>å¢</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Role</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;æ ‡é¢˜&#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">obj1</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&#34;ç®¡ç†å‘˜&#34;</span><span class="p">,</span> <span class="n">od</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">obj2</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">&#34;title&#34;</span><span class="p">:</span> <span class="s2">&#34;ç®¡ç†å‘˜&#34;</span><span class="p">,</span> <span class="s2">&#34;od&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">å†…å­˜</span> <span class="o">-&gt;</span> <span class="n">save</span>
</span></span><span class="line"><span class="cl"><span class="n">obj</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&#34;å®¢æˆ·&#34;</span><span class="p">,</span> <span class="n">od</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">obj</span><span class="o">.</span><span class="n">od</span> <span class="o">=</span> <span class="mi">100</span>
</span></span><span class="line"><span class="cl"><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">obj</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">&#34;title&#34;</span><span class="p">:</span> <span class="s2">&#34;ç®¡ç†å‘˜&#34;</span><span class="p">,</span> <span class="s2">&#34;od&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="n">obj</span><span class="o">.</span><span class="n">od</span> <span class="o">=</span> <span class="mi">100</span>
</span></span><span class="line"><span class="cl"><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ§åˆ¶è¾“å‡ºæ ¼å¼ é‡å†™__str__æ–¹æ³•</p>
<p><img src="/post/python/Django/1732328790674-7e46b45b-8bc0-4323-83cd-7c80b33db501.png"
	
	
	
	loading="lazy"
	
	
></p>
<ul>
<li>åˆ </li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># models.Role.objects.all().delete()</span>
</span></span><span class="line"><span class="cl"><span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&#34;ç®¡ç†å‘˜&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æ”¹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">od</span><span class="o">=</span><span class="mi">99</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">od</span><span class="o">=</span><span class="mi">99</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&#34;ç®¡ç†å‘˜&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">&#34;od&#34;</span><span class="p">:</span> <span class="mi">99</span><span class="p">,</span> <span class="s2">&#34;title&#34;</span><span class="p">:</span> <span class="s2">&#34;ç®¡ç†å‘˜&#34;</span><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æŸ¥</li>
</ul>
<p>æ¡ä»¶ç­›é€‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># QuerySet = [obj, obj]</span>
</span></span><span class="line"><span class="cl"><span class="n">v1</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">v1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">od</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># QuerySet = []</span>
</span></span><span class="line"><span class="cl"><span class="c1"># v2 = models.Role.objects.filter(od=99, id=99)</span>
</span></span><span class="line"><span class="cl"><span class="n">v2</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">&#34;od&#34;</span><span class="p">:</span> <span class="mi">99</span><span class="p">,</span> <span class="s2">&#34;id&#34;</span><span class="p">:</span> <span class="mi">99</span><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">v2</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">od</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">v3</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">99</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">v3</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">v3</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">id__gt</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">v3</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>  <span class="c1"># &gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">v3</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">id__gte</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">v3</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>  <span class="c1"># &gt;=</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">v3</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">id__lt</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">v3</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>  <span class="c1"># &lt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">v3</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">id__in</span><span class="o">=</span><span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">33</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">v3</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">v3</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">title__contains</span><span class="o">=</span><span class="s2">&#34;æˆ·&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">v3</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">v3</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">title__startswith</span><span class="o">=</span><span class="s2">&#34;æˆ·&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">v3</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">v3</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">title__isnull</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">v3</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸ç­‰äº</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">v3</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">99</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">v3</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ä¸ç­‰äº</span>
</span></span><span class="line"><span class="cl"><span class="n">v3</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">99</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">od</span><span class="o">=</span><span class="mi">88</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">v3</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è·å–å­—å…¸ï¼Œå…ƒç»„åˆ—è¡¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># queryset=[obj,obj]</span>
</span></span><span class="line"><span class="cl"><span class="n">v3</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">99</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># queryset=[{&#39;id&#39;: 6, &#39;title&#39;: &#39;å®¢æˆ·&#39;}, {&#39;id&#39;: 7, &#39;title&#39;: &#39;å®¢æˆ·&#39;}]</span>
</span></span><span class="line"><span class="cl"><span class="n">v4</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">id__gt</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&#34;id&#34;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># QuerySet = [(6, &#39;å®¢æˆ·&#39;), (7, &#39;å®¢æˆ·&#39;)]</span>
</span></span><span class="line"><span class="cl"><span class="n">v5</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">id__gt</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">values_list</span><span class="p">(</span><span class="s2">&#34;id&#34;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">v5</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è·å–å•ä¸ªå¯¹è±¡</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">v6</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">id__gt</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="c1"># print(v6)  # å¯¹è±¡</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">v7</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">id__gt</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">v7</span><span class="p">)</span>  <span class="c1"># True/False</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ’åº</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># asc</span>
</span></span><span class="line"><span class="cl"><span class="n">v8</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">id__gt</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&#34;id&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># id desc  od asc</span>
</span></span><span class="line"><span class="cl"><span class="n">v9</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">id__gt</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&#34;-id&#34;</span><span class="p">,</span> <span class="s1">&#39;od&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ä¸€å¯¹å¤š">ä¸€å¯¹å¤š
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Depart</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34; éƒ¨é—¨ &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;æ ‡é¢˜&#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Admin</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;å§“å&#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">pwd</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;å¯†ç &#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">depart</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;éƒ¨é—¨&#34;</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s2">&#34;Depart&#34;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å¢</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">models</span><span class="o">.</span><span class="n">Admin</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;æ­¦æ²›é½1&#39;</span><span class="p">,</span> <span class="n">pwd</span><span class="o">=</span><span class="s1">&#39;123123123&#39;</span><span class="p">,</span> <span class="n">depart_id</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># models.Admin.objects.create(**{..})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">obj</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Depart</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">models</span><span class="o">.</span><span class="n">Admin</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;æ­¦æ²›é½2&#39;</span><span class="p">,</span> <span class="n">pwd</span><span class="o">=</span><span class="s1">&#39;123123123&#39;</span><span class="p">,</span> <span class="n">depart</span><span class="o">=</span><span class="n">obj</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">models</span><span class="o">.</span><span class="n">Admin</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;æ­¦æ²›é½2&#39;</span><span class="p">,</span> <span class="n">pwd</span><span class="o">=</span><span class="s1">&#39;123123123&#39;</span><span class="p">,</span> <span class="n">depart_id</span><span class="o">=</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>åˆ </li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># filter()   # å½“å‰è¡¨çš„å­—æ®µ + depart__å­—æ®µ    -&gt; è¿è¡¨å’Œæ¡ä»¶</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ‰¾åˆ°éƒ¨é—¨id=3çš„æ‰€æœ‰çš„å‘˜å·¥ï¼Œåˆ é™¤</span>
</span></span><span class="line"><span class="cl"><span class="n">models</span><span class="o">.</span><span class="n">Admin</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">depart_id</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åˆ é™¤é”€å”®éƒ¨çš„æ‰€æœ‰å‘˜å·¥</span>
</span></span><span class="line"><span class="cl"><span class="n">obj</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Depart</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&#34;é”€å”®éƒ¨&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">models</span><span class="o">.</span><span class="n">Admin</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">depart_id</span><span class="o">=</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="c1"># è·¨è¡¨</span>
</span></span><span class="line"><span class="cl"><span class="n">models</span><span class="o">.</span><span class="n">Admin</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">depart__title</span><span class="o">=</span><span class="s2">&#34;é”€å”®éƒ¨&#34;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;æ­¦æ²›é½&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æ”¹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># æŸ¥è¯¢</span>
</span></span><span class="line"><span class="cl"><span class="n">models</span><span class="o">.</span><span class="n">Admin</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;xxx&#39;</span><span class="p">,</span> <span class="n">pwd</span><span class="o">=</span><span class="s1">&#39;xxxx&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">models</span><span class="o">.</span><span class="n">Admin</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;æ­¦æ²›é½&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">depart_id</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># models.Admin.objects.filter(id=2).update(depart__title=&#34;æŠ€æœ¯éƒ¨&#34;)  -&gt; åªèƒ½æ›´æ–°è‡ªå·±è¡¨å­—æ®µ</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æŸ¥</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># 1. select * from admin    					queryset=[obj,obj,]</span>
</span></span><span class="line"><span class="cl"><span class="n">v1</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Admin</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">id__gt</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">v1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">pwd</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">depart_id</span><span class="p">)</span>  <span class="c1"># ä»¥è¿™ç§æ–¹å¼æŸ¥æ‰¾å°½é‡ä¸è¦è·¨è¡¨ï¼Œæ•ˆç‡å¾ˆä½</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 2. select * from admin inner join depart      queryset=[obj,obj,]</span>
</span></span><span class="line"><span class="cl"><span class="n">v2</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Admin</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">id__gt</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">select_related</span><span class="p">(</span><span class="s2">&#34;depart&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">v2</span><span class="p">:</span> 
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">pwd</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">depart_id</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">depart</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 3. select id,name.. from admin inner join depart      queryset=[{},{}]</span>
</span></span><span class="line"><span class="cl"><span class="n">v3</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Admin</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">id__gt</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&#34;id&#34;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;pwd&#39;</span><span class="p">,</span> <span class="s2">&#34;depart__title&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">v3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 4. select id,name.. from admin inner join depart      queryset=[(),()]</span>
</span></span><span class="line"><span class="cl"><span class="n">v4</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Admin</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">id__gt</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">values_list</span><span class="p">(</span><span class="s2">&#34;id&#34;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;pwd&#39;</span><span class="p">,</span> <span class="s2">&#34;depart__title&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">v4</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å¤šå¯¹å¤š">å¤šå¯¹å¤š
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Boy</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;å§“å&#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Girl</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;å§“å&#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">B2G</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">bid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">to</span><span class="o">=</span><span class="s2">&#34;Boy&#34;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">gid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">to</span><span class="o">=</span><span class="s2">&#34;Girl&#34;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">address</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">verbose_name</span><span class="o">=</span><span class="s2">&#34;åœ°ç‚¹&#34;</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">models</span><span class="o">.</span><span class="n">Boy</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;å®å¼º&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">models</span><span class="o">.</span><span class="n">Boy</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;ç¾½å‡¡&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">models</span><span class="o">.</span><span class="n">Boy</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;ä¹ƒäº®&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">models</span><span class="o">.</span><span class="n">Girl</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">bulk_create</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">objs</span><span class="o">=</span><span class="p">[</span><span class="n">models</span><span class="o">.</span><span class="n">Girl</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;å°è·¯&#34;</span><span class="p">),</span> <span class="n">models</span><span class="o">.</span><span class="n">Girl</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;ç™¾åˆ&#34;</span><span class="p">),</span> <span class="n">models</span><span class="o">.</span><span class="n">Girl</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;é©¬è“‰&#34;</span><span class="p">)],</span>
</span></span><span class="line"><span class="cl">        <span class="n">batch_size</span><span class="o">=</span><span class="mi">3</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># åˆ›å»ºå…³ç³»</span>
</span></span><span class="line"><span class="cl">    <span class="n">models</span><span class="o">.</span><span class="n">B2G</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bid_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">gid_id</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s2">&#34;åŒ—äº¬&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">models</span><span class="o">.</span><span class="n">B2G</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bid_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">gid_id</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s2">&#34;åŒ—äº¬&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">models</span><span class="o">.</span><span class="n">B2G</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bid_id</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">gid_id</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s2">&#34;åŒ—äº¬&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">models</span><span class="o">.</span><span class="n">B2G</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bid_id</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">gid_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s2">&#34;åŒ—äº¬&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">b_obj</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Boy</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;å®å¼º&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">g_object</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Girl</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;å°è·¯&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">models</span><span class="o">.</span><span class="n">B2G</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bid</span><span class="o">=</span><span class="n">b_obj</span><span class="p">,</span> <span class="n">gid</span><span class="o">=</span><span class="n">g_object</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s2">&#34;åŒ—äº¬&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 1.å®å¼ºéƒ½ä¸è°çº¦ä¼šã€‚</span>
</span></span><span class="line"><span class="cl">    <span class="n">queyset</span><span class="o">=</span><span class="p">[</span><span class="n">obj</span><span class="p">,</span><span class="n">obj</span><span class="p">,</span><span class="n">obj</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">q</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">B2G</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">bid__name</span><span class="o">=</span><span class="s1">&#39;å®å¼º&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">select_related</span><span class="p">(</span><span class="s2">&#34;gid&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">q</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">bid</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">gid</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">q</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">B2G</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">bid__name</span><span class="o">=</span><span class="s1">&#39;å®å¼º&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&#34;id&#34;</span><span class="p">,</span> <span class="s1">&#39;bid__name&#39;</span><span class="p">,</span> <span class="s1">&#39;gid__name&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">q</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;bid__name&#39;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;gid__name&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 2.ç™¾åˆ éƒ½ä¸è°çº¦ä¼šã€‚</span>
</span></span><span class="line"><span class="cl">    <span class="n">q</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">B2G</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">gid__name</span><span class="o">=</span><span class="s1">&#39;ç™¾åˆ&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="s2">&#34;id&#34;</span><span class="p">,</span> <span class="s1">&#39;bid__name&#39;</span><span class="p">,</span> <span class="s1">&#39;gid__name&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">q</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;bid__name&#39;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;gid__name&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 3.åˆ é™¤</span>
</span></span><span class="line"><span class="cl">    <span class="n">models</span><span class="o">.</span><span class="n">B2G</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">models</span><span class="o">.</span><span class="n">Boy</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&#34;è¿”å›&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ä¸€å¯¹ä¸€">ä¸€å¯¹ä¸€
</h4><p><img src="/post/python/Django/1732336942184-224968b7-56b0-4464-9ba3-71fc23969d44.png"
	
	
	
	loading="lazy"
	
	
></p>
<h2 id="cookieå’Œseeesion">cookieå’Œseeesion
</h2><h3 id="cookie">cookie
</h3><p><img src="/post/python/Django/1732337342278-0d558d6d-b66c-4fe7-8a19-db307b1287a8.png"
	
	
	
	loading="lazy"
	
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="mf">127.0.0.1</span>       <span class="n">v1</span><span class="o">.</span><span class="n">wupeiqi</span><span class="o">.</span><span class="n">com</span>
</span></span><span class="line"><span class="cl"><span class="mf">127.0.0.1</span>       <span class="n">v2</span><span class="o">.</span><span class="n">wupeiqi</span><span class="o">.</span><span class="n">com</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/post/python/Django/1732337452694-3063ebca-e902-4e52-8996-67df227dbcd7.png"
	
	
	
	loading="lazy"
	
	
></p>
<h3 id="é…ç½®session">é…ç½®session
</h3><ul>
<li>æ–‡ä»¶ç‰ˆ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">MIDDLEWARE</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.middleware.security.SecurityMiddleware&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.contrib.sessions.middleware.SessionMiddleware&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.middleware.common.CommonMiddleware&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.middleware.csrf.CsrfViewMiddleware&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.auth.middleware.AuthenticationMiddleware&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.messages.middleware.MessageMiddleware&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.middleware.clickjacking.XFrameOptionsMiddleware&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># session</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_ENGINE</span> <span class="o">=</span> <span class="s1">&#39;django.contrib.sessions.backends.file&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_FILE_PATH</span> <span class="o">=</span> <span class="s1">&#39;xxxx&#39;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">SESSION_COOKIE_NAME</span> <span class="o">=</span> <span class="s2">&#34;sid&#34;</span>  <span class="c1"># Sessionçš„cookieä¿å­˜åœ¨æµè§ˆå™¨ä¸Šæ—¶çš„keyï¼Œå³ï¼šsessionidï¼éšæœºå­—ç¬¦ä¸²</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_COOKIE_PATH</span> <span class="o">=</span> <span class="s2">&#34;/&#34;</span>  <span class="c1"># Sessionçš„cookieä¿å­˜çš„è·¯å¾„</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_COOKIE_DOMAIN</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Sessionçš„cookieä¿å­˜çš„åŸŸå</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_COOKIE_SECURE</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># æ˜¯å¦Httpsä¼ è¾“cookie</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_COOKIE_HTTPONLY</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># æ˜¯å¦Sessionçš„cookieåªæ”¯æŒhttpä¼ è¾“</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_COOKIE_AGE</span> <span class="o">=</span> <span class="mi">1209600</span>  <span class="c1"># Sessionçš„cookieå¤±æ•ˆæ—¥æœŸï¼ˆ2å‘¨ï¼‰</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">SESSION_EXPIRE_AT_BROWSER_CLOSE</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># æ˜¯å¦å…³é—­æµè§ˆå™¨ä½¿å¾—Sessionè¿‡æœŸ</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_SAVE_EVERY_REQUEST</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># æ˜¯å¦æ¯æ¬¡è¯·æ±‚éƒ½ä¿å­˜Sessionï¼Œé»˜è®¤ä¿®æ”¹ä¹‹åæ‰ä¿å­˜</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æ•°æ®åº“ç‰ˆ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.admin&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.auth&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.contenttypes&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.contrib.sessions&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.messages&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.contrib.staticfiles&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;app01.apps.App01Config&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">MIDDLEWARE</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.middleware.security.SecurityMiddleware&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.contrib.sessions.middleware.SessionMiddleware&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.middleware.common.CommonMiddleware&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.middleware.csrf.CsrfViewMiddleware&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.auth.middleware.AuthenticationMiddleware&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.messages.middleware.MessageMiddleware&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.middleware.clickjacking.XFrameOptionsMiddleware&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># session</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_ENGINE</span> <span class="o">=</span> <span class="s1">&#39;django.contrib.sessions.backends.db&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">SESSION_COOKIE_NAME</span> <span class="o">=</span> <span class="s2">&#34;sid&#34;</span>  <span class="c1"># Sessionçš„cookieä¿å­˜åœ¨æµè§ˆå™¨ä¸Šæ—¶çš„keyï¼Œå³ï¼šsessionidï¼éšæœºå­—ç¬¦ä¸²</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_COOKIE_PATH</span> <span class="o">=</span> <span class="s2">&#34;/&#34;</span>  <span class="c1"># Sessionçš„cookieä¿å­˜çš„è·¯å¾„</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_COOKIE_DOMAIN</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Sessionçš„cookieä¿å­˜çš„åŸŸå</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_COOKIE_SECURE</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># æ˜¯å¦Httpsä¼ è¾“cookie</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_COOKIE_HTTPONLY</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># æ˜¯å¦Sessionçš„cookieåªæ”¯æŒhttpä¼ è¾“</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_COOKIE_AGE</span> <span class="o">=</span> <span class="mi">1209600</span>  <span class="c1"># Sessionçš„cookieå¤±æ•ˆæ—¥æœŸï¼ˆ2å‘¨ï¼‰</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">SESSION_EXPIRE_AT_BROWSER_CLOSE</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># æ˜¯å¦å…³é—­æµè§ˆå™¨ä½¿å¾—Sessionè¿‡æœŸ</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_SAVE_EVERY_REQUEST</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># æ˜¯å¦æ¯æ¬¡è¯·æ±‚éƒ½ä¿å­˜Sessionï¼Œé»˜è®¤ä¿®æ”¹ä¹‹åæ‰ä¿å­˜</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/post/python/Django/1732337591554-c318f336-ede4-418c-a048-ad2c07c652c4.png"
	
	
	
	loading="lazy"
	
	
></p>
<ul>
<li>ç¼“å­˜</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.admin&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.auth&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.contenttypes&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.sessions&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.messages&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.contrib.staticfiles&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;app01.apps.App01Config&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">MIDDLEWARE</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.middleware.security.SecurityMiddleware&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.contrib.sessions.middleware.SessionMiddleware&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.middleware.common.CommonMiddleware&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.middleware.csrf.CsrfViewMiddleware&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.auth.middleware.AuthenticationMiddleware&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># &#39;django.contrib.messages.middleware.MessageMiddleware&#39;,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;django.middleware.clickjacking.XFrameOptionsMiddleware&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># session</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_ENGINE</span> <span class="o">=</span> <span class="s1">&#39;django.contrib.sessions.backends.cache&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_CACHE_ALIAS</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">SESSION_COOKIE_NAME</span> <span class="o">=</span> <span class="s2">&#34;sid&#34;</span>  <span class="c1"># Sessionçš„cookieä¿å­˜åœ¨æµè§ˆå™¨ä¸Šæ—¶çš„keyï¼Œå³ï¼šsessionidï¼éšæœºå­—ç¬¦ä¸²</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_COOKIE_PATH</span> <span class="o">=</span> <span class="s2">&#34;/&#34;</span>  <span class="c1"># Sessionçš„cookieä¿å­˜çš„è·¯å¾„</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_COOKIE_DOMAIN</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Sessionçš„cookieä¿å­˜çš„åŸŸå</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_COOKIE_SECURE</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># æ˜¯å¦Httpsä¼ è¾“cookie</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_COOKIE_HTTPONLY</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># æ˜¯å¦Sessionçš„cookieåªæ”¯æŒhttpä¼ è¾“</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_COOKIE_AGE</span> <span class="o">=</span> <span class="mi">1209600</span>  <span class="c1"># Sessionçš„cookieå¤±æ•ˆæ—¥æœŸï¼ˆ2å‘¨ï¼‰</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">SESSION_EXPIRE_AT_BROWSER_CLOSE</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># æ˜¯å¦å…³é—­æµè§ˆå™¨ä½¿å¾—Sessionè¿‡æœŸ</span>
</span></span><span class="line"><span class="cl"><span class="n">SESSION_SAVE_EVERY_REQUEST</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># æ˜¯å¦æ¯æ¬¡è¯·æ±‚éƒ½ä¿å­˜Sessionï¼Œé»˜è®¤ä¿®æ”¹ä¹‹åæ‰ä¿å­˜</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¼“å­˜">ç¼“å­˜
</h3><ul>
<li>æœåŠ¡å™¨ + rediså®‰è£…å¯åŠ¨</li>
<li>django
<ul>
<li>å®‰è£…è¿æ¥redisåŒ…</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">pip</span> <span class="n">install</span> <span class="n">django</span><span class="o">-</span><span class="n">redis</span>
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>- settings.py
</code></pre>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;default&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;BACKEND&#34;</span><span class="p">:</span> <span class="s2">&#34;django_redis.cache.RedisCache&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;LOCATION&#34;</span><span class="p">:</span> <span class="s2">&#34;redis://127.0.0.1:6379&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;OPTIONS&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;CLIENT_CLASS&#34;</span><span class="p">:</span> <span class="s2">&#34;django_redis.client.DefaultClient&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;CONNECTION_POOL_KWARGS&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;max_connections&#34;</span><span class="p">:</span> <span class="mi">100</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># &#34;PASSWORD&#34;: &#34;å¯†ç &#34;,</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><pre><code>- æ‰‹åŠ¨æ“ä½œredis
</code></pre>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django_redis</span> <span class="kn">import</span> <span class="n">get_redis_connection</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">conn</span> <span class="o">=</span> <span class="n">get_redis_connection</span><span class="p">(</span><span class="s2">&#34;default&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">conn</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&#34;xx&#34;</span><span class="p">,</span><span class="s2">&#34;123123&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">conn</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;xx&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="yn0t1me/blog-commnet"
        issue-term="pathname"
        
        label="utterances"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    let utterancesLoaded = false;

    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;

        
        utterancesLoaded = true;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        if (!utterancesLoaded) return;
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2025 yn0t1me
    </section>
    
    <section class="powerby">
        ä½¿ç”¨ <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> æ„å»º <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.30.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
